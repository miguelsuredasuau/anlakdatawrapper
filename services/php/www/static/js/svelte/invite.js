!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("svelte/invite",t):(e="undefined"!=typeof globalThis?globalThis:e||self).invite=t()}(this,(function(){"use strict";function e(){}function t(e,t){for(var s in t)e[s]=t[s];return e}function s(e,t){e.appendChild(t)}function r(e,t,s){e.insertBefore(t,s)}function o(e){e.parentNode.removeChild(e)}function n(e){return document.createElement(e)}function a(e){return document.createTextNode(e)}function i(e,t,s,r){e.addEventListener(t,s,r)}function d(e,t,s,r){e.removeEventListener(t,s,r)}function p(e,t,s){null==s?e.removeAttribute(t):e.setAttribute(t,s)}function c(e,t,s){e.style.setProperty(t,s)}function u(e,t,s){e.classList[s?"add":"remove"](t)}function l(){return Object.create(null)}function w(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function h(e,t){return e!=e?t==t:e!==t}function f(e,t){var s=e in this._handlers&&this._handlers[e].slice();if(s)for(var r=0;r<s.length;r+=1){var o=s[r];if(!o.__calling)try{o.__calling=!0,o.call(this,t)}finally{o.__calling=!1}}}function m(e){e._lock=!0,E(e._beforecreate),E(e._oncreate),E(e._aftercreate),e._lock=!1}function g(){return this._state}function v(e,t){e._handlers=l(),e._slots=l(),e._bind=t._bind,e._staged={},e.options=t,e.root=t.root||e,e.store=t.store||e.root.store,t.root||(e._beforecreate=[],e._oncreate=[],e._aftercreate=[])}function _(e,t){var s=this._handlers[e]||(this._handlers[e]=[]);return s.push(t),{cancel:function(){var e=s.indexOf(t);~e&&s.splice(e,1)}}}function E(e){for(;e&&e.length;)e.shift()()}var S={destroy:function(t){this.destroy=e,this.fire("destroy"),this.set=e,this._fragment.d(!1!==t),this._fragment=null,this._state={}},get:g,fire:f,on:_,set:function(e){this._set(t({},e)),this.root._lock||m(this.root)},_recompute:e,_set:function(e){var s=this._state,r={},o=!1;for(var n in e=t(this._staged,e),this._staged={},e)this._differs(e[n],s[n])&&(r[n]=o=!0);o&&(this._state=t(t({},s),e),this._recompute(r,this._state),this._bind&&this._bind(r,this._state),this._fragment&&(this.fire("state",{changed:r,current:this._state,previous:s}),this._fragment.p(r,this._state),this.fire("update",{changed:r,current:this._state,previous:s})))},_stage:function(e){t(this._staged,e)},_mount:function(e,t){this._fragment[this._fragment.i?"i":"m"](e,t||null)},_differs:w};const b={};function H(e="core"){"chart"===e?window.__dw&&window.__dw.vis&&window.__dw.vis.meta&&(b[e]=window.__dw.vis.meta.locale||{}):b[e]="core"===e?dw.backend.__messages.core:Object.assign({},dw.backend.__messages.core,dw.backend.__messages[e])}function y(e,t="core"){if(e=e.trim(),b[t]||H(t),!b[t][e])return"MISSING:"+e;var s=b[t][e];return"string"==typeof s&&arguments.length>2&&(s=s.replace(/\$(\d)/g,(e,t)=>(t=2+Number(t),void 0===arguments[t]?e:arguments[t]))),s}var T={exports:{}};
/*!
	 * JavaScript Cookie v2.2.1
	 * https://github.com/js-cookie/js-cookie
	 *
	 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
	 * Released under the MIT license
	 */!function(e,t){var s;s=function(){function e(){for(var e=0,t={};e<arguments.length;e++){var s=arguments[e];for(var r in s)t[r]=s[r]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function s(r){function o(){}function n(t,s,n){if("undefined"!=typeof document){"number"==typeof(n=e({path:"/"},o.defaults,n)).expires&&(n.expires=new Date(1*new Date+864e5*n.expires)),n.expires=n.expires?n.expires.toUTCString():"";try{var a=JSON.stringify(s);/^[\{\[]/.test(a)&&(s=a)}catch(e){}s=r.write?r.write(s,t):encodeURIComponent(String(s)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var i="";for(var d in n)n[d]&&(i+="; "+d,!0!==n[d]&&(i+="="+n[d].split(";")[0]));return document.cookie=t+"="+s+i}}function a(e,s){if("undefined"!=typeof document){for(var o={},n=document.cookie?document.cookie.split("; "):[],a=0;a<n.length;a++){var i=n[a].split("="),d=i.slice(1).join("=");s||'"'!==d.charAt(0)||(d=d.slice(1,-1));try{var p=t(i[0]);if(d=(r.read||r)(d,p)||t(d),s)try{d=JSON.parse(d)}catch(e){}if(o[p]=d,e===p)break}catch(e){}}return e?o[e]:o}}return o.set=n,o.get=function(e){return a(e,!1)},o.getJSON=function(e){return a(e,!0)},o.remove=function(t,s){n(t,"",e(s,{expires:-1}))},o.defaults={},o.withConverter=s,o}((function(){}))},e.exports=s()}(T);var k=T.exports;const x=new Set(["get","head","options","trace"]);function R(e,t={}){if(!t.fetch)try{t.fetch=window.fetch}catch(e){throw new Error("Neither options.fetch nor window.fetch is defined.")}if(!t.baseUrl)try{t.baseUrl="//"+window.dw.backend.__api_domain}catch(e){throw new Error("Neither options.baseUrl nor window.dw is defined.")}const{payload:s,baseUrl:r,fetch:o,raw:n,...a}={payload:null,raw:!1,method:"GET",mode:"cors",credentials:"include",...t,headers:{"Content-Type":"application/json",...t.headers}},i=`${r.replace(/\/$/,"")}/${e.replace(/^\//,"")}`;let d;if(s&&(a.body=JSON.stringify(s)),x.has(a.method.toLowerCase()))d=o(i,a);else{const e=k.get("crumb");e?(a.headers["X-CSRF-Token"]=e,d=o(i,a)):d=R("/v3/me",{fetch:o,baseUrl:r}).then(()=>{const e=k.get("crumb");e&&(a.headers["X-CSRF-Token"]=e)}).catch(()=>{}).then(()=>o(i,a))}return d.then(e=>{if(n)return e;if(!e.ok)throw new N(e);if(204===e.status||!e.headers.get("content-type"))return e;const t=e.headers.get("content-type").split(";")[0];return"application/json"===t?e.json():"image/png"===t||"application/pdf"===t?e.blob():e.text()})}function L(e){return(t,s)=>{if(s&&s.method)throw new Error(`Setting option.method is not allowed in httpReq.${e.toLowerCase()}()`);return R(t,{...s,method:e})}}R.get=L("GET"),R.patch=L("PATCH"),R.put=L("PUT"),R.post=L("POST"),R.head=L("HEAD"),R.delete=L("DELETE");class N extends Error{constructor(e){super(),this.name="HttpReqError",this.status=e.status,this.statusText=e.statusText,this.message=`[${e.status}] ${e.statusText}`,this.response=e}}let z,C=!1;function O({password:e}){return z?z(e):(!C&&e.length>4&&(C=!0,require(["zxcvbn"],e=>{z=e})),!1)}function M(e,t){var s,n=t.password.length>=8&&q();return{c(){n&&n.c(),s=document.createComment("")},m(e,t){n&&n.m(e,t),r(e,s,t)},p(e,t){t.password.length>=8?n||((n=q()).c(),n.m(s.parentNode,s)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&o(s)}}}function q(t,s){return{c:e,m:e,d:e}}function U(e){v(this,e),this._state=t({password:""},e.data),this._recompute({password:1,passwordStrength:1,passwordTooShort:1,passwordHelp:1},this._state),this._intro=!0,this._fragment=M(0,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor))}t(U.prototype,S),U.prototype._recompute=function(e,t){e.password&&(this._differs(t.passwordTooShort,t.passwordTooShort=function({password:e}){return e.length<8}(t))&&(e.passwordTooShort=!0),this._differs(t.passwordStrength,t.passwordStrength=O(t))&&(e.passwordStrength=!0)),(e.password||e.passwordStrength)&&this._differs(t.passwordHelp,t.passwordHelp=function({password:e,passwordStrength:t}){return""!==e&&t?y("account / password / "+["bad","weak","ok","good","excellent"][t.score]):y("account / pwd-too-short").replace("%num",8)}(t))&&(e.passwordHelp=!0),(e.password||e.passwordTooShort||e.passwordStrength||e.passwordHelp)&&this._differs(t.passwordError,t.passwordError=function({password:e,passwordTooShort:t,passwordStrength:s,passwordHelp:r}){return!!e&&(t?y("account / pwd-too-short").replace("%num",8):!!(s&&s.score<2)&&r)}(t))&&(e.passwordError=!0),(e.passwordStrength||e.passwordHelp)&&this._differs(t.passwordSuccess,t.passwordSuccess=function({passwordStrength:e,passwordHelp:t}){return!!(e&&e.score>2)&&t}(t))&&(e.passwordSuccess=!0),(e.password||e.passwordTooShort)&&this._differs(t.passwordOk,t.passwordOk=function({password:e,passwordTooShort:t}){return e&&!t}(t))&&(e.passwordOk=!0)};var $={async doSignUp(){const e=window.location.pathname.split("/").pop(),{password:t,redirect:s,isPasswordReset:r}=this.get();this.set({loggingIn:!0});try{r?await R.post("/v3/auth/change-password",{payload:{token:e,password:t}}):await R.post("/v3/auth/activate/"+e,{payload:{password:t}}),this.set({activateSuccess:"Password was set up successfully!"}),setTimeout(()=>{window.location.href=s},1e3)}catch(e){if("HttpReqError"===e.name){const t=await e.response.json();this.set({activateError:t?t.message:e.message})}else this.set({activateError:e})}this.set({loggingIn:!1})}};function P(e,t){var l,w,h,f,m,g,v,_,E,S,b,H,T,k,x,R,L,N,z,C,O,M,q,$,P,K,Q,W,Y,ee,te=y("password"),se={},re=y("account / invite / password-clear-text");function oe(t){e.set({windowHeight:this.innerHeight})}window.addEventListener("resize",oe);var ne=t.customLogo&&j(e,t);function ae(e){return e.clearText?I:A}var ie=ae(t),de=ie(e,t),pe={};void 0!==t.password&&(pe.password=t.password,se.password=!0),void 0!==t.password&&(pe.passwordRepeat=t.password,se.passwordRepeat=!0),void 0!==t.passwordHelp&&(pe.passwordHelp=t.passwordHelp,se.passwordHelp=!0),void 0!==t.passwordSuccess&&(pe.passwordSuccess=t.passwordSuccess,se.passwordSuccess=!0),void 0!==t.passwordError&&(pe.passwordError=t.passwordError,se.passwordError=!0),void 0!==t.passwordRepeatError&&(pe.passwordRepeatError=t.passwordRepeatError,se.passwordRepeatError=!0),void 0!==t.passwordOk&&(pe.passwordOk=t.passwordOk,se.passwordOk=!0);var ce=new U({root:e.root,store:e.store,data:pe,_bind(t,s){var r={};!se.password&&t.password&&(r.password=s.password),!se.passwordRepeat&&t.passwordRepeat&&(r.password=s.passwordRepeat),!se.passwordHelp&&t.passwordHelp&&(r.passwordHelp=s.passwordHelp),!se.passwordSuccess&&t.passwordSuccess&&(r.passwordSuccess=s.passwordSuccess),!se.passwordError&&t.passwordError&&(r.passwordError=s.passwordError),!se.passwordRepeatError&&t.passwordRepeatError&&(r.passwordRepeatError=s.passwordRepeatError),!se.passwordOk&&t.passwordOk&&(r.passwordOk=s.passwordOk),e._set(r),se={}}});function ue(e){return e.passwordError?F:e.passwordSuccess?B:e.passwordHelp?D:void 0}e.root._beforecreate.push(()=>{ce._bind({password:1,passwordRepeat:1,passwordHelp:1,passwordSuccess:1,passwordError:1,passwordRepeatError:1,passwordOk:1},ce.get())});var le=ue(t),we=le&&le(e,t);function he(){e.set({clearText:z.checked})}var fe=t.activateError&&J(e,t),me=t.activateSuccess&&G(e,t),ge=t.email&&X(e,t);function ve(e){return e.signingUp?Z:V}var _e=ve(t),Ee=_e(e,t);function Se(t){e.doSignUp()}function be(){e.set({modalHeight:w.clientHeight})}return{c(){ne&&ne.c(),l=a("\n\n\n\n"),w=n("div"),h=n("div"),f=n("h3"),m=a("\n        "),g=n("p"),v=a("\n\n        "),_=n("div"),E=n("div"),S=n("div"),b=n("label"),H=a(te),T=a("\n                    "),de.c(),k=a("\n                    "),ce._fragment.c(),x=a("\n                    "),we&&we.c(),R=a("\n            "),L=n("div"),N=n("label"),z=n("input"),C=a(" "),O=a(re),M=a("\n            "),fe&&fe.c(),q=a(" "),me&&me.c(),$=a(" "),ge&&ge.c(),P=a("\n\n        "),K=n("button"),Q=n("noscript"),W=a(" Â  "),Ee.c(),f.className="svelte-1dqizzw",b.className="svelte-1dqizzw",S.className="controls",E.className="control-group svelte-1dqizzw",u(E,"warning",t.passwordError),u(E,"success",t.passwordSuccess),i(z,"change",he),p(z,"type","checkbox"),z.className="pwd-clear",N.className="checkbox svelte-1dqizzw",L.className="control-group svelte-1dqizzw",_.className="login-form form-vertical",i(K,"click",Se),K.disabled=Y=!t.passwordOk,K.className="btn btn-primary btn-large login",h.className="modal-body svelte-1dqizzw",e.root._aftercreate.push(be),w.className="modal svelte-1dqizzw",c(w,"margin-top",t.marginTop+"px")},m(e,o){ne&&ne.m(e,o),r(e,l,o),r(e,w,o),s(w,h),s(h,f),f.innerHTML=t.headline,s(h,m),s(h,g),g.innerHTML=t.intro,s(h,v),s(h,_),s(_,E),s(E,S),s(S,b),s(b,H),s(S,T),de.m(S,null),s(S,k),ce._mount(S,null),s(S,x),we&&we.m(S,null),s(_,R),s(_,L),s(L,N),s(N,z),z.checked=t.clearText,s(N,C),s(N,O),s(_,M),fe&&fe.m(_,null),s(_,q),me&&me.m(_,null),s(_,$),ge&&ge.m(_,null),s(h,P),s(h,K),s(K,Q),Q.insertAdjacentHTML("beforebegin",t.button),s(K,W),Ee.m(K,null),ee=function(e,t){"static"===getComputedStyle(e).position&&(e.style.position="relative");const s=document.createElement("object");let r;return s.setAttribute("style","display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; pointer-events: none; z-index: -1;"),s.type="text/html",s.onload=()=>{r=s.contentDocument.defaultView,r.addEventListener("resize",t)},/Trident/.test(navigator.userAgent)?(e.appendChild(s),s.data="about:blank"):(s.data="about:blank",e.appendChild(s)),{cancel:()=>{r&&r.removeEventListener&&r.removeEventListener("resize",t),e.removeChild(s)}}}(w,be)},p(s,r){(t=r).customLogo?ne?ne.p(s,t):((ne=j(e,t)).c(),ne.m(l.parentNode,l)):ne&&(ne.d(1),ne=null),s.headline&&(f.innerHTML=t.headline),s.intro&&(g.innerHTML=t.intro),ie===(ie=ae(t))&&de?de.p(s,t):(de.d(1),(de=ie(e,t)).c(),de.m(S,k));var o={};!se.password&&s.password&&(o.password=t.password,se.password=void 0!==t.password),!se.passwordRepeat&&s.password&&(o.passwordRepeat=t.password,se.passwordRepeat=void 0!==t.password),!se.passwordHelp&&s.passwordHelp&&(o.passwordHelp=t.passwordHelp,se.passwordHelp=void 0!==t.passwordHelp),!se.passwordSuccess&&s.passwordSuccess&&(o.passwordSuccess=t.passwordSuccess,se.passwordSuccess=void 0!==t.passwordSuccess),!se.passwordError&&s.passwordError&&(o.passwordError=t.passwordError,se.passwordError=void 0!==t.passwordError),!se.passwordRepeatError&&s.passwordRepeatError&&(o.passwordRepeatError=t.passwordRepeatError,se.passwordRepeatError=void 0!==t.passwordRepeatError),!se.passwordOk&&s.passwordOk&&(o.passwordOk=t.passwordOk,se.passwordOk=void 0!==t.passwordOk),ce._set(o),se={},le===(le=ue(t))&&we?we.p(s,t):(we&&we.d(1),(we=le&&le(e,t))&&we.c(),we&&we.m(S,null)),s.passwordError&&u(E,"warning",t.passwordError),s.passwordSuccess&&u(E,"success",t.passwordSuccess),s.clearText&&(z.checked=t.clearText),t.activateError?fe?fe.p(s,t):((fe=J(e,t)).c(),fe.m(_,q)):fe&&(fe.d(1),fe=null),t.activateSuccess?me?me.p(s,t):((me=G(e,t)).c(),me.m(_,$)):me&&(me.d(1),me=null),t.email?ge?ge.p(s,t):((ge=X(e,t)).c(),ge.m(_,null)):ge&&(ge.d(1),ge=null),s.button&&(!function(e){for(;e.previousSibling;)e.parentNode.removeChild(e.previousSibling)}(Q),Q.insertAdjacentHTML("beforebegin",t.button)),_e!==(_e=ve(t))&&(Ee.d(1),(Ee=_e(e,t)).c(),Ee.m(K,null)),s.passwordOk&&Y!==(Y=!t.passwordOk)&&(K.disabled=Y),s.marginTop&&c(w,"margin-top",t.marginTop+"px")},d(e){window.removeEventListener("resize",oe),ne&&ne.d(e),e&&(o(l),o(w)),de.d(),ce.destroy(),we&&we.d(),d(z,"change",he),fe&&fe.d(),me&&me.d(),ge&&ge.d(),Ee.d(),d(K,"click",Se),ee.cancel()}}}function j(e,t){var a,i,d;return{c(){a=n("div"),(i=n("img")).src=d="/static/custom/"+{customLogo:t.customLogo}+"}",c(i,"height","50px"),i.alt="logo",a.className="brand"},m(e,t){r(e,a,t),s(a,i)},p(e,t){e.customLogo&&d!==(d="/static/custom/"+{customLogo:t.customLogo}+"}")&&(i.src=d)},d(e){e&&o(a)}}}function A(e,t){var s,a=!1;function c(){a=!0,e.set({password:s.value}),a=!1}return{c(){i(s=n("input"),"input",c),s.dataset.lpignore="true",s.className="login-pwd input-xlarge span3 svelte-1dqizzw",p(s,"type","password")},m(e,o){r(e,s,o),s.value=t.password},p(e,t){!a&&e.password&&(s.value=t.password)},d(e){e&&o(s),d(s,"input",c)}}}function I(e,t){var s,a=!1;function c(){a=!0,e.set({password:s.value}),a=!1}return{c(){i(s=n("input"),"input",c),s.dataset.lpignore="true",s.className="login-pwd input-xlarge span3 svelte-1dqizzw",p(s,"type","text")},m(e,o){r(e,s,o),s.value=t.password},p(e,t){!a&&e.password&&(s.value=t.password)},d(e){e&&o(s),d(s,"input",c)}}}function D(e,t){var s;return{c(){(s=n("p")).className="help muted svelte-1dqizzw"},m(e,o){r(e,s,o),s.innerHTML=t.passwordHelp},p(e,t){e.passwordHelp&&(s.innerHTML=t.passwordHelp)},d(e){e&&o(s)}}}function B(e,t){var s;return{c(){(s=n("p")).className="help text-success svelte-1dqizzw"},m(e,o){r(e,s,o),s.innerHTML=t.passwordSuccess},p(e,t){e.passwordSuccess&&(s.innerHTML=t.passwordSuccess)},d(e){e&&o(s)}}}function F(e,t){var s;return{c(){(s=n("p")).className="help text-warning svelte-1dqizzw"},m(e,o){r(e,s,o),s.innerHTML=t.passwordError},p(e,t){e.passwordError&&(s.innerHTML=t.passwordError)},d(e){e&&o(s)}}}function J(e,t){var s;return{c(){(s=n("div")).className="alert alert-warning"},m(e,o){r(e,s,o),s.innerHTML=t.activateError},p(e,t){e.activateError&&(s.innerHTML=t.activateError)},d(e){e&&o(s)}}}function G(e,t){var s;return{c(){(s=n("div")).className="alert alert-success"},m(e,o){r(e,s,o),s.innerHTML=t.activateSuccess},p(e,t){e.activateSuccess&&(s.innerHTML=t.activateSuccess)},d(e){e&&o(s)}}}function X(e,t){var s,a=y("account / invite / your-login-is").replace("%s",`<span class="email"\n                    >${t.email}</span\n                >`);return{c(){(s=n("div")).className="control-group login-help svelte-1dqizzw"},m(e,t){r(e,s,t),s.innerHTML=a},p(e,t){e.email&&a!==(a=y("account / invite / your-login-is").replace("%s",`<span class="email"\n                    >${t.email}</span\n                >`))&&(s.innerHTML=a)},d(e){e&&o(s)}}}function V(e,t){var s;return{c(){(s=n("i")).className="fa fa-fw fa-chevron-right"},m(e,t){r(e,s,t)},d(e){e&&o(s)}}}function Z(e,t){var s;return{c(){(s=n("i")).className="fa fa-fw fa-spinner fa-pulse"},m(e,t){r(e,s,t)},d(e){e&&o(s)}}}function K(e){v(this,e),this._state=t({redirect:"/",password:"",passwordOk:!1,passwordHelp:!1,passwordSuccess:!1,passwordError:!1,passwordRepeatError:!1,loggingIn:!1,activateSuccess:!1,activateError:!1,windowHeight:1e3,modalHeight:300,clearText:!1,headline:"",intro:"",email:"",button:"Set password",isPasswordReset:!1},e.data),this._state.windowHeight=window.innerHeight,this._recompute({windowHeight:1,modalHeight:1},this._state),this._intro=!0,this._fragment=P(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),m(this))}function Q(e,s){this._handlers={},this._dependents=[],this._computed=l(),this._sortedComputedProperties=[],this._state=t({},e),this._differs=s&&s.immutable?h:w}t(K.prototype,S),t(K.prototype,$),K.prototype._recompute=function(e,t){(e.windowHeight||e.modalHeight)&&this._differs(t.marginTop,t.marginTop=function({windowHeight:e,modalHeight:t}){return.5*(e-t)}(t))&&(e.marginTop=!0)},t(Q.prototype,{_add(e,t){this._dependents.push({component:e,props:t})},_init(e){const t={};for(let s=0;s<e.length;s+=1){const r=e[s];t["$"+r]=this._state[r]}return t},_remove(e){let t=this._dependents.length;for(;t--;)if(this._dependents[t].component===e)return void this._dependents.splice(t,1)},_set(e,s){const r=this._state;this._state=t(t({},r),e);for(let e=0;e<this._sortedComputedProperties.length;e+=1)this._sortedComputedProperties[e].update(this._state,s);this.fire("state",{changed:s,previous:r,current:this._state}),this._dependents.filter(e=>{const t={};let r=!1;for(let o=0;o<e.props.length;o+=1){const n=e.props[o];n in s&&(t["$"+n]=this._state[n],r=!0)}if(r)return e.component._stage(t),!0}).forEach(e=>{e.component.set({})}),this.fire("update",{changed:s,previous:r,current:this._state})},_sortComputedProperties(){const e=this._computed,t=this._sortedComputedProperties=[],s=l();let r;function o(n){const a=e[n];a&&(a.deps.forEach(e=>{if(e===r)throw new Error(`Cyclical dependency detected between ${e} <-> ${n}`);o(e)}),s[n]||(s[n]=!0,t.push(a)))}for(const e in this._computed)o(r=e)},compute(e,s,r){let o;const n={deps:s,update:(t,n,a)=>{const i=s.map(e=>(e in n&&(a=!0),t[e]));if(a){const s=r.apply(null,i);this._differs(s,o)&&(o=s,n[e]=!0,t[e]=o)}}};this._computed[e]=n,this._sortComputedProperties();const a=t({},this._state),i={};n.update(a,i,!0),this._set(a,i)},fire:f,get:g,on:_,set(e){const t=this._state,s=this._changed={};let r=!1;for(const o in e){if(this._computed[o])throw new Error(`'${o}' is a read-only computed property`);this._differs(e[o],t[o])&&(s[o]=r=!0)}r&&this._set(e,s)}});return{App:K,data:{},store:new Q({}),init:function(){}}}));
