!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("svelte/account/myteams",t):(e="undefined"!=typeof globalThis?globalThis:e||self)["account/myteams"]=t()}(this,(function(){"use strict";function e(){}function t(e,t){for(var n in t)e[n]=t[n];return e}function n(e,t){for(var n in t)e[n]=1;return e}function a(e,t){e.appendChild(t)}function r(e,t,n){e.insertBefore(t,n)}function s(e){e.parentNode.removeChild(e)}function o(e,t){for(var n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function i(){return document.createDocumentFragment()}function c(e){return document.createElement(e)}function u(e){return document.createTextNode(e)}function l(){return document.createComment("")}function m(e,t,n,a){e.addEventListener(t,n,a)}function d(e,t,n,a){e.removeEventListener(t,n,a)}function h(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function p(e,t){e.data=""+t}function f(e,t,n){e.style.setProperty(t,n)}function v(e,t){for(var n=0;n<e.options.length;n+=1){var a=e.options[n];if(a.__value===t)return void(a.selected=!0)}}function g(e){var t=e.querySelector(":checked")||e.options[0];return t&&t.__value}function _(e,t,n){e.classList[n?"add":"remove"](t)}function w(e,n){var a,r=n.token={};function s(e,a,s,o){if(n.token!==r)return;n.resolved=s&&{[s]:o};const i=t(t({},n.ctx),n.resolved),c=e&&(n.current=e)(n.component,i);n.block&&(n.blocks?n.blocks.forEach((e,t)=>{t!==a&&e&&e.o(()=>{e.d(1),n.blocks[t]=null})}):n.block.d(1),c.c(),c[c.i?"i":"m"](n.mount(),n.anchor),n.component.root.set({})),n.block=c,n.blocks&&(n.blocks[a]=c)}if((a=e)&&"function"==typeof a.then){if(e.then(e=>{s(n.then,1,n.value,e)},e=>{s(n.catch,2,n.error,e)}),n.current!==n.pending)return s(n.pending,0),!0}else{if(n.current!==n.then)return s(n.then,1,n.value,e),!0;n.resolved={[n.value]:e}}}function b(){return Object.create(null)}function T(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function y(e,t){return e!=e?t==t:e!==t}function N(e,t){var n=e in this._handlers&&this._handlers[e].slice();if(n)for(var a=0;a<n.length;a+=1){var r=n[a];if(!r.__calling)try{r.__calling=!0,r.call(this,t)}finally{r.__calling=!1}}}function k(e){e._lock=!0,S(e._beforecreate),S(e._oncreate),S(e._aftercreate),e._lock=!1}function x(){return this._state}function C(e,t){e._handlers=b(),e._slots=b(),e._bind=t._bind,e._staged={},e.options=t,e.root=t.root||e,e.store=t.store||e.root.store,t.root||(e._beforecreate=[],e._oncreate=[],e._aftercreate=[])}function L(e,t){var n=this._handlers[e]||(this._handlers[e]=[]);return n.push(t),{cancel:function(){var e=n.indexOf(t);~e&&n.splice(e,1)}}}function S(e){for(;e&&e.length;)e.shift()()}var A={destroy:function(t){this.destroy=e,this.fire("destroy"),this.set=e,this._fragment.d(!1!==t),this._fragment=null,this._state={}},get:x,fire:N,on:L,set:function(e){this._set(t({},e)),this.root._lock||k(this.root)},_recompute:e,_set:function(e){var n=this._state,a={},r=!1;for(var s in e=t(this._staged,e),this._staged={},e)this._differs(e[s],n[s])&&(a[s]=r=!0);r&&(this._state=t(t({},n),e),this._recompute(a,this._state),this._bind&&this._bind(a,this._state),this._fragment&&(this.fire("state",{changed:a,current:this._state,previous:n}),this._fragment.p(a,this._state),this.fire("update",{changed:a,current:this._state,previous:n})))},_stage:function(e){t(this._staged,e)},_mount:function(e,t){this._fragment[this._fragment.i?"i":"m"](e,t||null)},_differs:T};const E={};function H(e="core"){"chart"===e?window.__dw&&window.__dw.vis&&window.__dw.vis.meta&&(E[e]=window.__dw.vis.meta.locale||{}):E[e]="core"===e?dw.backend.__messages.core:Object.assign({},dw.backend.__messages.core,dw.backend.__messages[e])}function M(e,t="core"){if(e=e.trim(),E[t]||H(t),!E[t][e])return"MISSING:"+e;var n=E[t][e];return"string"==typeof n&&arguments.length>2&&(n=n.replace(/\$(\d)/g,(e,t)=>(t=2+Number(t),void 0===arguments[t]?e:arguments[t]))),n}function O(e,t=11,n=7){return"string"!=typeof e||e.length<t+n+3?e:e.substr(0,t).trim()+"…"+e.substr(e.length-n).trim()}function $(e,t){var n;return{c(){(n=c("label")).className="control-label svelte-1nkiaxn"},m(e,a){r(e,n,a),n.innerHTML=t.label},p(e,t){e.label&&(n.innerHTML=t.label)},d(e){e&&s(n)}}}function j(e,t){var n;return{c(){(n=c("div")).className="help success svelte-1nkiaxn"},m(e,a){r(e,n,a),n.innerHTML=t.success},p(e,t){e.success&&(n.innerHTML=t.success)},d(e){e&&s(n)}}}function U(e,t){var n;return{c(){(n=c("div")).className="help error svelte-1nkiaxn"},m(e,a){r(e,n,a),n.innerHTML=t.error},p(e,t){e.error&&(n.innerHTML=t.error)},d(e){e&&s(n)}}}function P(e,t){var n;return{c(){(n=c("div")).className="help svelte-1nkiaxn"},m(e,a){r(e,n,a),n.innerHTML=t.help},p(e,t){e.help&&(n.innerHTML=t.help)},d(e){e&&s(n)}}}function R(e){var n,o,i,l,m,d,h,p,v,g,w,b,T;C(this,e),this._state=t({label:"",help:"",error:!1,success:!1,width:"auto",uid:""},e.data),this._intro=!0,this._slotted=e.slots||{},this._fragment=(n=this,o=this._state,v=n._slotted.default,g=o.label&&$(0,o),w=o.success&&j(0,o),b=o.error&&U(0,o),T=!o.success&&!o.error&&o.help&&P(0,o),{c(){i=c("div"),g&&g.c(),l=u("\n    "),m=c("div"),d=u("\n    "),w&&w.c(),h=u(" "),b&&b.c(),p=u(" "),T&&T.c(),m.className="form-controls svelte-1nkiaxn",i.className="form-block svelte-1nkiaxn",f(i,"width",o.width),i.dataset.uid=o.uid,_(i,"success",o.success),_(i,"error",o.error)},m(e,t){r(e,i,t),g&&g.m(i,null),a(i,l),a(i,m),v&&a(m,v),a(i,d),w&&w.m(i,null),a(i,h),b&&b.m(i,null),a(i,p),T&&T.m(i,null)},p(e,t){t.label?g?g.p(e,t):((g=$(0,t)).c(),g.m(i,l)):g&&(g.d(1),g=null),t.success?w?w.p(e,t):((w=j(0,t)).c(),w.m(i,h)):w&&(w.d(1),w=null),t.error?b?b.p(e,t):((b=U(0,t)).c(),b.m(i,p)):b&&(b.d(1),b=null),t.success||t.error||!t.help?T&&(T.d(1),T=null):T?T.p(e,t):((T=P(0,t)).c(),T.m(i,null)),e.width&&f(i,"width",t.width),e.uid&&(i.dataset.uid=t.uid),e.success&&_(i,"success",t.success),e.error&&_(i,"error",t.error)},d(e){e&&s(i),g&&g.d(),v&&function(e,t){for(;e.firstChild;)t.appendChild(e.firstChild)}(m,v),w&&w.d(),b&&b.d(),T&&T.d()}}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor))}function D(e,t,n){const a=Object.create(e);return a.opt=t[n],a}function I(e,t,n){const a=Object.create(e);return a.optgroup=t[n],a}function q(e,t,n){const a=Object.create(e);return a.opt=t[n],a}function B(e,t){for(var n,a=t.options,i=[],c=0;c<a.length;c+=1)i[c]=F(e,q(t,a,c));return{c(){for(var e=0;e<i.length;e+=1)i[e].c();n=l()},m(e,t){for(var a=0;a<i.length;a+=1)i[a].m(e,t);r(e,n,t)},p(t,r){if(t.options||t.value){a=r.options;for(var s=0;s<a.length;s+=1){const o=q(r,a,s);i[s]?i[s].p(t,o):(i[s]=F(e,o),i[s].c(),i[s].m(n.parentNode,n))}for(;s<i.length;s+=1)i[s].d(1);i.length=a.length}},d(e){o(i,e),e&&s(n)}}}function F(e,t){var n,o,i,l,m=t.opt.label;return{c(){n=c("option"),o=u(m),n.__value=i=t.opt.value,n.value=n.__value,n.selected=l=t.opt.value===t.value},m(e,t){r(e,n,t),a(n,o)},p(e,t){e.options&&m!==(m=t.opt.label)&&p(o,m),e.options&&i!==(i=t.opt.value)&&(n.__value=i),n.value=n.__value,(e.options||e.value)&&l!==(l=t.opt.value===t.value)&&(n.selected=l)},d(e){e&&s(n)}}}function J(e,t){for(var n,a=t.optgroups,i=[],c=0;c<a.length;c+=1)i[c]=W(e,I(t,a,c));return{c(){for(var e=0;e<i.length;e+=1)i[e].c();n=l()},m(e,t){for(var a=0;a<i.length;a+=1)i[a].m(e,t);r(e,n,t)},p(t,r){if(t.optgroups||t.value){a=r.optgroups;for(var s=0;s<a.length;s+=1){const o=I(r,a,s);i[s]?i[s].p(t,o):(i[s]=W(e,o),i[s].c(),i[s].m(n.parentNode,n))}for(;s<i.length;s+=1)i[s].d(1);i.length=a.length}},d(e){o(i,e),e&&s(n)}}}function G(e,t){var n,o,i,l,m=t.opt.label;return{c(){n=c("option"),o=u(m),n.__value=i=t.opt.value,n.value=n.__value,n.selected=l=t.opt.value===t.value},m(e,t){r(e,n,t),a(n,o)},p(e,t){e.optgroups&&m!==(m=t.opt.label)&&p(o,m),e.optgroups&&i!==(i=t.opt.value)&&(n.__value=i),n.value=n.__value,(e.optgroups||e.value)&&l!==(l=t.opt.value===t.value)&&(n.selected=l)},d(e){e&&s(n)}}}function W(e,t){for(var n,a,i=t.optgroup.options,u=[],l=0;l<i.length;l+=1)u[l]=G(0,D(t,i,l));return{c(){n=c("optgroup");for(var e=0;e<u.length;e+=1)u[e].c();h(n,"label",a=t.optgroup.label)},m(e,t){r(e,n,t);for(var a=0;a<u.length;a+=1)u[a].m(n,null)},p(e,t){if(e.optgroups||e.value){i=t.optgroup.options;for(var r=0;r<i.length;r+=1){const a=D(t,i,r);u[r]?u[r].p(e,a):(u[r]=G(0,a),u[r].c(),u[r].m(n,null))}for(;r<u.length;r+=1)u[r].d(1);u.length=i.length}e.optgroups&&a!==(a=t.optgroup.label)&&h(n,"label",a)},d(e){e&&s(n),o(u,e)}}}function X(e){C(this,e),this._state=t({disabled:!1,width:"auto",labelWidth:"auto",options:[],optgroups:[],value:null,class:"",uid:""},e.data),this._intro=!0,this._fragment=function(e,t){var n,o,i,u=!1,h=t.options.length&&B(e,t),p=t.optgroups.length&&J(e,t);function _(){u=!0,e.set({value:g(n)}),u=!1}function w(t){e.fire("change",t)}return{c(){n=c("select"),h&&h.c(),o=l(),p&&p.c(),m(n,"change",_),"value"in t||e.root._beforecreate.push(_),m(n,"change",w),n.className=i="select-css "+t.class+" svelte-v0oq4b",n.disabled=t.disabled,f(n,"width",t.width),n.dataset.uid=t.uid},m(e,s){r(e,n,s),h&&h.m(n,null),a(n,o),p&&p.m(n,null),v(n,t.value)},p(t,a){a.options.length?h?h.p(t,a):((h=B(e,a)).c(),h.m(n,o)):h&&(h.d(1),h=null),a.optgroups.length?p?p.p(t,a):((p=J(e,a)).c(),p.m(n,null)):p&&(p.d(1),p=null),!u&&t.value&&v(n,a.value),t.class&&i!==(i="select-css "+a.class+" svelte-v0oq4b")&&(n.className=i),t.disabled&&(n.disabled=a.disabled),t.width&&f(n,"width",a.width),t.uid&&(n.dataset.uid=a.uid)},d(e){e&&s(n),h&&h.d(),p&&p.d(),d(n,"change",_),d(n,"change",w)}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),k(this))}t(R.prototype,A),t(X.prototype,A);var Z={exports:{}};
/*!
	 * JavaScript Cookie v2.2.1
	 * https://github.com/js-cookie/js-cookie
	 *
	 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
	 * Released under the MIT license
	 */!function(e,t){var n;n=function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var a in n)t[a]=n[a]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(a){function r(){}function s(t,n,s){if("undefined"!=typeof document){"number"==typeof(s=e({path:"/"},r.defaults,s)).expires&&(s.expires=new Date(1*new Date+864e5*s.expires)),s.expires=s.expires?s.expires.toUTCString():"";try{var o=JSON.stringify(n);/^[\{\[]/.test(o)&&(n=o)}catch(e){}n=a.write?a.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var i="";for(var c in s)s[c]&&(i+="; "+c,!0!==s[c]&&(i+="="+s[c].split(";")[0]));return document.cookie=t+"="+n+i}}function o(e,n){if("undefined"!=typeof document){for(var r={},s=document.cookie?document.cookie.split("; "):[],o=0;o<s.length;o++){var i=s[o].split("="),c=i.slice(1).join("=");n||'"'!==c.charAt(0)||(c=c.slice(1,-1));try{var u=t(i[0]);if(c=(a.read||a)(c,u)||t(c),n)try{c=JSON.parse(c)}catch(e){}if(r[u]=c,e===u)break}catch(e){}}return e?r[e]:r}}return r.set=s,r.get=function(e){return o(e,!1)},r.getJSON=function(e){return o(e,!0)},r.remove=function(t,n){s(t,"",e(n,{expires:-1}))},r.defaults={},r.withConverter=n,r}((function(){}))},e.exports=n()}(Z);var z=Z.exports;const K=new Set(["get","head","options","trace"]);function Q(e,t={}){if(!t.fetch)try{t.fetch=window.fetch}catch(e){throw new Error("Neither options.fetch nor window.fetch is defined.")}if(!t.baseUrl)try{t.baseUrl="//"+window.dw.backend.__api_domain}catch(e){throw new Error("Neither options.baseUrl nor window.dw is defined.")}const{payload:n,baseUrl:a,fetch:r,raw:s,...o}={payload:null,raw:!1,method:"GET",mode:"cors",credentials:"include",...t,headers:{"Content-Type":"application/json",...t.headers}},i=`${a.replace(/\/$/,"")}/${e.replace(/^\//,"")}`;let c;if(n&&(o.body=JSON.stringify(n)),K.has(o.method.toLowerCase()))c=r(i,o);else{const e=z.get("crumb");e?(o.headers["X-CSRF-Token"]=e,c=r(i,o)):c=Q("/v3/me",{fetch:r,baseUrl:a}).then(()=>{const e=z.get("crumb");e&&(o.headers["X-CSRF-Token"]=e)}).catch(()=>{}).then(()=>r(i,o))}return c.then(e=>{if(s)return e;if(!e.ok)throw new Y(e);if(204===e.status||!e.headers.get("content-type"))return e;const t=e.headers.get("content-type").split(";")[0];return"application/json"===t?e.json():"image/png"===t||"application/pdf"===t?e.blob():e.text()})}function V(e){return(t,n)=>{if(n&&n.method)throw new Error(`Setting option.method is not allowed in httpReq.${e.toLowerCase()}()`);return Q(t,{...n,method:e})}}Q.get=V("GET"),Q.patch=V("PATCH"),Q.put=V("PUT"),Q.post=V("POST"),Q.head=V("HEAD"),Q.delete=V("DELETE");class Y extends Error{constructor(e){super(),this.name="HttpReqError",this.status=e.status,this.statusText=e.statusText,this.message=`[${e.status}] ${e.statusText}`,this.response=e}}var ee={createTeam(e,t){const{user:n}=this.get(),a={name:e};n.isAdmin&&t&&(a.id=String(t).trim().toLowerCase()),this.set({awaitCreateTeam:Q("/v3/teams",{method:"post",payload:a}).then(e=>{window.location.href=`/team/${e.id}/settings`})})},leaveTeam(e){const{user:t,teams:n}=this.get();window.confirm(M("account / my-teams / leave-team / confirm").replace("%team%",e.name))&&Q(`/v3/teams/${e.id}/members/${t.id}`,{method:"delete"}).then(()=>{window.alert(M("account / my-teams / leave-team / done")),n.splice(n.findIndex(t=>t.id===e.id),1),this.set({teams:n})}).catch(e=>{window.alert("There was a problem with your request. Please contact support@datawrapper.de"),console.error(e)})}};function te({changed:e,current:t,previous:n}){if(n&&e.currentTeam&&void 0!==t.currentTeam){Q.patch("/v3/me/settings",{payload:{activeTeam:t.currentTeam||null}}).then(()=>this.set({newActiveTeamState:"success"})).catch(()=>this.set({newActiveTeamState:"error"}))}}function ne(e){const{component:t,ctx:n}=this._svelte;t.leaveTeam(n.team)}function ae(e,t,n){const a=Object.create(e);return a.team=t[n],a}function re(t,n){var a,o=M("account / my-teams / no-teams-yet");return{c(){a=c("p")},m(e,t){r(e,a,t),a.innerHTML=o},p:e,d(e){e&&s(a)}}}function se(e,t){for(var n,i,l,m,d,h,p,f,v,g,_,w,b,T,y,N,k,x,C,L,S,A,E=M("account / my-teams / your-teams"),H=M("account / my-teams / name"),O=M("account / my-teams / your-role"),$=M("account / my-teams / num-charts"),j=M("account / my-teams / num-members"),U=M("account / my-teams / leave-team"),P=t.user.isAdmin&&oe(),R=t.teams,D=[],I=0;I<R.length;I+=1)D[I]=ve(e,ae(t,R,I));return{c(){n=c("p"),i=u("\n\n"),l=c("table"),m=c("thead"),d=c("tr"),h=c("th"),p=u(H),f=u("\n            "),P&&P.c(),v=u("\n            "),g=c("th"),_=u(O),w=u("\n            "),b=c("th"),T=u($),y=u("\n            "),N=c("th"),k=u(j),x=u("\n            "),C=c("th"),L=u(U),S=u("\n    "),A=c("tbody");for(var e=0;e<D.length;e+=1)D[e].c();l.className="table"},m(e,t){r(e,n,t),n.innerHTML=E,r(e,i,t),r(e,l,t),a(l,m),a(m,d),a(d,h),a(h,p),a(d,f),P&&P.m(d,null),a(d,v),a(d,g),a(g,_),a(d,w),a(d,b),a(b,T),a(d,y),a(d,N),a(N,k),a(d,x),a(d,C),a(C,L),a(l,S),a(l,A);for(var s=0;s<D.length;s+=1)D[s].m(A,null)},p(t,n){if(n.user.isAdmin?P||((P=oe()).c(),P.m(d,v)):P&&(P.d(1),P=null),t.teams||t.currentTeam||t.user){R=n.teams;for(var a=0;a<R.length;a+=1){const r=ae(n,R,a);D[a]?D[a].p(t,r):(D[a]=ve(e,r),D[a].c(),D[a].m(A,null))}for(;a<D.length;a+=1)D[a].d(1);D.length=R.length}},d(e){e&&(s(n),s(i),s(l)),P&&P.d(),o(D,e)}}}function oe(e,t){var n,o,i=M("account / my-teams / id");return{c(){n=c("th"),o=u(i)},m(e,t){r(e,n,t),a(n,o)},d(e){e&&s(n)}}}function ie(e,t){var n,o,i,l=O(t.team.name,20,10);return{c(){n=c("a"),o=u(l),n.href=i="/team/"+t.team.id+"/settings"},m(e,t){r(e,n,t),a(n,o)},p(e,t){e.teams&&l!==(l=O(t.team.name,20,10))&&p(o,l),e.teams&&i!==(i="/team/"+t.team.id+"/settings")&&(n.href=i)},d(e){e&&s(n)}}}function ce(e,t){var n,a=O(t.team.name,20,10);return{c(){n=u(a)},m(e,t){r(e,n,t)},p(e,t){e.teams&&a!==(a=O(t.team.name,20,10))&&p(n,a)},d(e){e&&s(n)}}}function ue(e,t){var n;return{c(){(n=c("i")).className="fa fa-check-circle"},m(e,t){r(e,n,t)},d(e){e&&s(n)}}}function le(e,t){var n,o,i=t.team.id;return{c(){n=c("td"),o=u(i),n.className="slug svelte-t3x94h"},m(e,t){r(e,n,t),a(n,o)},p(e,t){e.teams&&i!==(i=t.team.id)&&p(o,i)},d(e){e&&s(n)}}}function me(e,t){var n,o,i,m,d,h=t.team.members,f=t.team.invites&&he(e,t);return{c(){n=c("a"),o=u(h),m=u(" "),f&&f.c(),d=l(),n.href=i="/team/"+t.team.id+"/members"},m(e,t){r(e,n,t),a(n,o),r(e,m,t),f&&f.m(e,t),r(e,d,t)},p(t,a){t.teams&&h!==(h=a.team.members)&&p(o,h),t.teams&&i!==(i="/team/"+a.team.id+"/members")&&(n.href=i),a.team.invites?f?f.p(t,a):((f=he(e,a)).c(),f.m(d.parentNode,d)):f&&(f.d(1),f=null)},d(e){e&&(s(n),s(m)),f&&f.d(e),e&&s(d)}}}function de(e,t){var n,a=t.team.members;return{c(){n=u(a)},m(e,t){r(e,n,t)},p(e,t){e.teams&&a!==(a=t.team.members)&&p(n,a)},d(e){e&&s(n)}}}function he(e,t){var n,o,i,l,m=t.team.invites;return{c(){n=c("span"),o=u("(+"),i=u(m),l=u(")"),n.className="invites svelte-t3x94h"},m(e,t){r(e,n,t),a(n,o),a(n,i),a(n,l)},p(e,t){e.teams&&m!==(m=t.team.invites)&&p(i,m)},d(e){e&&s(n)}}}function pe(e,t){var n,o,i,l,m,d=M("account / my-teams / delete-team");return{c(){n=c("a"),o=c("i"),i=u(" "),l=u(d),o.className="fa fa-trash",n.href=m="/team/"+t.team.id+"/delete",n.className="btn btn-small btn-danger"},m(e,t){r(e,n,t),a(n,o),a(n,i),a(n,l)},p(e,t){e.teams&&m!==(m="/team/"+t.team.id+"/delete")&&(n.href=m)},d(e){e&&s(n)}}}function fe(e,t){var n,o,i,l,h=M("account / my-teams / leave-team");return{c(){n=c("button"),o=c("i"),i=u(" "),l=u(h),o.className="fa fa-sign-out",n._svelte={component:e,ctx:t},m(n,"click",ne),n.className="btn btn-small"},m(e,t){r(e,n,t),a(n,o),a(n,i),a(n,l)},p(e,a){t=a,n._svelte.ctx=t},d(e){e&&s(n),d(n,"click",ne)}}}function ve(e,t){var n,o,i,l,m,d,h,f,v,g,w,b,T,y,N,k=M("teams / role / "+t.team.role),x=t.team.charts;function C(e){return"member"!==e.team.role||e.user.isAdmin?ie:ce}var L=C(t),S=L(e,t),A=t.team.id===t.currentTeam&&ue(),E=t.user.isAdmin&&le(0,t);function H(e){return"member"===e.team.role?de:me}var O=H(t),$=O(e,t);function j(e){return"owner"!==e.team.role?fe:pe}var U=j(t),P=U(e,t);return{c(){n=c("tr"),o=c("td"),S.c(),i=u(" "),A&&A.c(),l=u("\n            "),E&&E.c(),m=u("\n            "),d=c("td"),h=u("\n            "),f=c("td"),v=c("a"),g=u(x),b=u("\n            "),T=c("td"),$.c(),y=u("\n\n            "),N=c("td"),P.c(),v.href=w="/team/"+t.team.id,_(n,"current",t.team.id===t.currentTeam)},m(e,t){r(e,n,t),a(n,o),S.m(o,null),a(o,i),A&&A.m(o,null),a(n,l),E&&E.m(n,null),a(n,m),a(n,d),d.innerHTML=k,a(n,h),a(n,f),a(f,v),a(v,g),a(n,b),a(n,T),$.m(T,null),a(n,y),a(n,N),P.m(N,null)},p(t,a){L===(L=C(a))&&S?S.p(t,a):(S.d(1),(S=L(e,a)).c(),S.m(o,i)),a.team.id===a.currentTeam?A||((A=ue()).c(),A.m(o,null)):A&&(A.d(1),A=null),a.user.isAdmin?E?E.p(t,a):((E=le(0,a)).c(),E.m(n,m)):E&&(E.d(1),E=null),t.teams&&k!==(k=M("teams / role / "+a.team.role))&&(d.innerHTML=k),t.teams&&x!==(x=a.team.charts)&&p(g,x),t.teams&&w!==(w="/team/"+a.team.id)&&(v.href=w),O===(O=H(a))&&$?$.p(t,a):($.d(1),($=O(e,a)).c(),$.m(T,null)),U===(U=j(a))&&P?P.p(t,a):(P.d(1),(P=U(e,a)).c(),P.m(N,null)),(t.teams||t.currentTeam)&&_(n,"current",a.team.id===a.currentTeam)},d(e){e&&s(n),S.d(),A&&A.d(),E&&E.d(),$.d(),P.d()}}}function ge(e,t){var n,o,l,p,f,v,g,_,w,b,T,y,N,k=M("team-create / p"),x=!1,C=M("team-create / button"),L=M("team-create / return");function S(){x=!0,e.set({newTeamName:l.value}),x=!1}var A={label:M("team-create / name"),help:M("team-create / help")},E=new R({root:e.root,store:e.store,slots:{default:i()},data:A}),H=t.user.isAdmin&&we(e,t);function O(e){return e.awaitCreateTeam?Te:be}var $=O(t),j=$(e,t);function U(n){e.createTeam(t.newTeamName,t.newTeamSlug)}function P(t){e.set({createTeam:!1})}return{c(){n=c("p"),o=u("\n\n        "),l=c("input"),E._fragment.c(),f=u("\n        "),H&&H.c(),v=u("\n\n        "),g=c("button"),j.c(),_=u("   "),w=u(C),T=u("\n        "),y=c("button"),N=u(L),m(l,"input",S),h(l,"type","text"),l.placeholder=M("team-create / untitled"),l.maxLength=p=t.user.isAdmin?80:50,m(g,"click",U),g.className="btn btn-primary",g.disabled=b=!t.newTeamName.length,m(y,"click",P),y.className="btn"},m(e,s){r(e,n,s),n.innerHTML=k,r(e,o,s),a(E._slotted.default,l),l.value=t.newTeamName,E._mount(e,s),r(e,f,s),H&&H.m(e,s),r(e,v,s),r(e,g,s),j.m(g,null),a(g,_),a(g,w),r(e,T,s),r(e,y,s),a(y,N)},p(n,a){t=a,!x&&n.newTeamName&&(l.value=t.newTeamName),n.user&&p!==(p=t.user.isAdmin?80:50)&&(l.maxLength=p),t.user.isAdmin?H?H.p(n,t):((H=we(e,t)).c(),H.m(v.parentNode,v)):H&&(H.d(1),H=null),$===($=O(t))&&j?j.p(n,t):(j.d(1),(j=$(e,t)).c(),j.m(g,_)),n.newTeamName&&b!==(b=!t.newTeamName.length)&&(g.disabled=b)},d(e){e&&(s(n),s(o)),d(l,"input",S),E.destroy(e),e&&s(f),H&&H.d(e),e&&(s(v),s(g)),j.d(),d(g,"click",U),e&&(s(T),s(y)),d(y,"click",P)}}}function _e(e,t){var n,o,i,l,h,p,f,v=M("account / my-teams / why-teams"),g=M("account / my-teams / create-btn");function w(t){e.set({createTeam:!0})}return{c(){n=c("div"),o=c("p"),i=u("\n            "),l=c("button"),h=c("i"),p=u(" "),f=c("noscript"),h.className="fa fa-plus fa-fw",m(l,"click",w),l.className="btn btn-large",_(l,"btn-primary",!t.teams.length),n.className="hed svelte-t3x94h"},m(e,t){r(e,n,t),a(n,o),o.innerHTML=v,a(n,i),a(n,l),a(l,h),a(l,p),a(l,f),f.insertAdjacentHTML("afterend",g)},p(e,t){e.teams&&_(l,"btn-primary",!t.teams.length)},d(e){e&&s(n),d(l,"click",w)}}}function we(e,t){var n,r=!1;function s(){r=!0,e.set({newTeamSlug:n.value}),r=!1}var o={label:M("team-create / slug"),help:M("team-create / slug-help")},u=new R({root:e.root,store:e.store,slots:{default:i()},data:o});return{c(){n=c("input"),u._fragment.c(),m(n,"input",s),h(n,"type","text"),n.placeholder=t.autoslug},m(e,r){a(u._slotted.default,n),n.value=t.newTeamSlug,u._mount(e,r)},p(e,t){!r&&e.newTeamSlug&&(n.value=t.newTeamSlug),e.autoslug&&(n.placeholder=t.autoslug)},d(e){d(n,"input",s),u.destroy(e)}}}function be(t,n){var a;return{c(){(a=c("i")).className="fa fa-plus fa-fw"},m(e,t){r(e,a,t)},p:e,d(e){e&&s(a)}}}function Te(e,t){var n,a;let o={component:e,ctx:t,current:null,pending:ke,then:Ne,catch:ye,value:"null",error:"null"};return w(a=t.awaitCreateTeam,o),{c(){n=l(),o.block.c()},m(e,t){r(e,n,t),o.block.m(e,o.anchor=t),o.mount=()=>n.parentNode,o.anchor=n},p(e,n){t=n,o.ctx=t,"awaitCreateTeam"in e&&a!==(a=t.awaitCreateTeam)&&w(a,o)},d(e){e&&s(n),o.block.d(e),o=null}}}function ye(e,t){var n;return{c(){(n=c("i")).className="fa fa-exclamation-triangle"},m(e,t){r(e,n,t)},d(e){e&&s(n)}}}function Ne(e,t){var n;return{c(){(n=c("i")).className="fa fa-check fa-fw"},m(e,t){r(e,n,t)},d(e){e&&s(n)}}}function ke(e,t){var n,a;return{c(){n=u(" "),(a=c("i")).className="fa fa-spinner fa-spin"},m(e,t){r(e,n,t),r(e,a,t)},d(e){e&&(s(n),s(a))}}}function xe(e,t){var n,o,l,m,d,h,p,f=M("account / my-teams / select-active"),v=M("account / my-teams / what-is-active"),g={},_={width:"250px",options:t.teamOptions};void 0!==t.currentTeam&&(_.value=t.currentTeam,g.value=!0);var w=new X({root:e.root,store:e.store,data:_,_bind(t,n){var a={};!g.value&&t.value&&(a.currentTeam=n.value),e._set(a),g={}}});function b(e){return"success"===e.newActiveTeamState?Le:"error"===e.newActiveTeamState?Ce:void 0}e.root._beforecreate.push(()=>{w._bind({value:1},w.get())});var T=b(t),y=T&&T(e,t),N={width:"350px",help:M("account / my-teams / active-hint")},k=new R({root:e.root,store:e.store,slots:{default:i()},data:N});return{c(){n=c("div"),o=c("h3"),l=u("\n        "),m=c("p"),d=u("\n        "),h=c("div"),w._fragment.c(),p=u("\n                "),y&&y.c(),k._fragment.c(),o.className="svelte-t3x94h",h.className="flex",n.className="span5"},m(e,t){r(e,n,t),a(n,o),o.innerHTML=f,a(n,l),a(n,m),m.innerHTML=v,a(n,d),a(k._slotted.default,h),w._mount(h,null),a(h,p),y&&y.m(h,null),k._mount(n,null)},p(n,a){t=a;var r={};n.teamOptions&&(r.options=t.teamOptions),!g.value&&n.currentTeam&&(r.value=t.currentTeam,g.value=void 0!==t.currentTeam),w._set(r),g={},T!==(T=b(t))&&(y&&y.d(1),(y=T&&T(e,t))&&y.c(),y&&y.m(h,null))},d(e){e&&s(n),w.destroy(),y&&y.d(),k.destroy()}}}function Ce(e,t){var n;return{c(){(n=c("i")).className="fa fa-exclamation-triangle"},m(e,t){r(e,n,t)},d(e){e&&s(n)}}}function Le(e,t){var n;return{c(){(n=c("i")).className="fa fa-check fa-fw"},m(e,t){r(e,n,t)},d(e){e&&s(n)}}}function Se(e){C(this,e),this._state=t({teams:[],awaitCreateTeam:null,currentTeam:"",createTeam:!1,newTeamName:"",newTeamSlug:"",newActiveTeamState:null},e.data),this._recompute({teams:1,newTeamName:1},this._state),this._intro=!0,this._handlers.state=[te],te.call(this,{changed:n({},this._state),current:this._state}),this._fragment=function(e,t){var n,o,i,l,m,d,h=M("account / my-teams / create");function p(e){return e.teams.length?se:re}var f=p(t),v=f(e,t);function g(e){return e.createTeam?ge:_e}var _=g(t),w=_(e,t),b=t.teams.length>0&&xe(e,t);return{c(){v.c(),n=u("\n\n"),o=c("div"),i=c("div"),l=c("h3"),m=u("\n        "),w.c(),d=u("\n    "),b&&b.c(),l.className="svelte-t3x94h",i.className="span5",o.className="row"},m(e,t){v.m(e,t),r(e,n,t),r(e,o,t),a(o,i),a(i,l),l.innerHTML=h,a(i,m),w.m(i,null),a(o,d),b&&b.m(o,null)},p(t,a){f===(f=p(a))&&v?v.p(t,a):(v.d(1),(v=f(e,a)).c(),v.m(n.parentNode,n)),_===(_=g(a))&&w?w.p(t,a):(w.d(1),(w=_(e,a)).c(),w.m(i,null)),a.teams.length>0?b?b.p(t,a):((b=xe(e,a)).c(),b.m(o,null)):b&&(b.d(1),b=null)},d(e){v.d(e),e&&(s(n),s(o)),w.d(),b&&b.d()}}}(this,this._state),this.root._oncreate.push(()=>{this.fire("update",{changed:n({},this._state),current:this._state})}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),k(this))}function Ae(e,n){this._handlers={},this._dependents=[],this._computed=b(),this._sortedComputedProperties=[],this._state=t({},e),this._differs=n&&n.immutable?y:T}t(Se.prototype,A),t(Se.prototype,ee),Se.prototype._recompute=function(e,t){e.teams&&this._differs(t.teamOptions,t.teamOptions=function({teams:e}){return e.map(({id:e,name:t})=>({value:e,label:t})).concat({value:null,label:M("nav / no-team")})}(t))&&(e.teamOptions=!0),e.newTeamName&&this._differs(t.autoslug,t.autoslug=function({newTeamName:e}){return e.toLowerCase().replace(/\W/g,"")}(t))&&(e.autoslug=!0)},t(Ae.prototype,{_add(e,t){this._dependents.push({component:e,props:t})},_init(e){const t={};for(let n=0;n<e.length;n+=1){const a=e[n];t["$"+a]=this._state[a]}return t},_remove(e){let t=this._dependents.length;for(;t--;)if(this._dependents[t].component===e)return void this._dependents.splice(t,1)},_set(e,n){const a=this._state;this._state=t(t({},a),e);for(let e=0;e<this._sortedComputedProperties.length;e+=1)this._sortedComputedProperties[e].update(this._state,n);this.fire("state",{changed:n,previous:a,current:this._state}),this._dependents.filter(e=>{const t={};let a=!1;for(let r=0;r<e.props.length;r+=1){const s=e.props[r];s in n&&(t["$"+s]=this._state[s],a=!0)}if(a)return e.component._stage(t),!0}).forEach(e=>{e.component.set({})}),this.fire("update",{changed:n,previous:a,current:this._state})},_sortComputedProperties(){const e=this._computed,t=this._sortedComputedProperties=[],n=b();let a;function r(s){const o=e[s];o&&(o.deps.forEach(e=>{if(e===a)throw new Error(`Cyclical dependency detected between ${e} <-> ${s}`);r(e)}),n[s]||(n[s]=!0,t.push(o)))}for(const e in this._computed)r(a=e)},compute(e,n,a){let r;const s={deps:n,update:(t,s,o)=>{const i=n.map(e=>(e in s&&(o=!0),t[e]));if(o){const n=a.apply(null,i);this._differs(n,r)&&(r=n,s[e]=!0,t[e]=r)}}};this._computed[e]=s,this._sortComputedProperties();const o=t({},this._state),i={};s.update(o,i,!0),this._set(o,i)},fire:N,get:x,on:L,set(e){const t=this._state,n=this._changed={};let a=!1;for(const r in e){if(this._computed[r])throw new Error(`'${r}' is a read-only computed property`);this._differs(e[r],t[r])&&(n[r]=a=!0)}a&&this._set(e,n)}});return{App:Se,data:{chart:{id:""},readonly:!1,chartData:"",transpose:!1,firstRowIsHeader:!0,skipRows:0},store:new Ae({})}}));
