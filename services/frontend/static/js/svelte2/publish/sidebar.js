!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self)["publish/sidebar"]=t()}(this,(function(){"use strict";function e(){}function t(e,t){for(var s in t)e[s]=t[s];return e}function s(e,t){for(var s in t)e[s]=1;return e}function n(e,t){e.appendChild(t)}function i(e,t,s){e.insertBefore(t,s)}function r(e){e.parentNode.removeChild(e)}function a(e,t){for(;e.nextSibling&&e.nextSibling!==t;)e.parentNode.removeChild(e.nextSibling)}function o(e){for(;e.nextSibling;)e.parentNode.removeChild(e.nextSibling)}function l(e,t,s){for(;e.nextSibling&&e.nextSibling!==t;)s.appendChild(e.parentNode.removeChild(e.nextSibling))}function c(e,t){for(;e.firstChild;)t.appendChild(e.firstChild)}function u(e,t){for(;e.nextSibling;)t.appendChild(e.nextSibling)}function d(e,t){for(var s=0;s<e.length;s+=1)e[s]&&e[s].d(t)}function p(){return document.createDocumentFragment()}function h(e){return document.createElement(e)}function m(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function b(e){return document.createTextNode(e)}function f(){return document.createComment("")}function g(e,t,s,n){e.addEventListener(t,s,n)}function v(e,t,s,n){e.removeEventListener(t,s,n)}function _(e,t,s){null==s?e.removeAttribute(t):e.setAttribute(t,s)}function y(e,t,s){e.setAttributeNS("http://www.w3.org/1999/xlink",t,s)}function w(e,t){e.data=""+t}function T(e,t,s){e.style.setProperty(t,s)}function L(e,t,s){e.classList[s?"add":"remove"](t)}function N(){return Object.create(null)}function U(e){e._lock=!0,R(e._beforecreate),R(e._oncreate),R(e._aftercreate),e._lock=!1}function x(e,t){e._handlers=N(),e._slots=N(),e._bind=t._bind,e._staged={},e.options=t,e.root=t.root||e,e.store=t.store||e.root.store,t.root||(e._beforecreate=[],e._oncreate=[],e._aftercreate=[])}function R(e){for(;e&&e.length;)e.shift()()}function S(){this.store._remove(this)}var H={destroy:function(t){this.destroy=e,this.fire("destroy"),this.set=e,this._fragment.d(!1!==t),this._fragment=null,this._state={}},get:function(){return this._state},fire:function(e,t){var s=e in this._handlers&&this._handlers[e].slice();if(s)for(var n=0;n<s.length;n+=1){var i=s[n];if(!i.__calling)try{i.__calling=!0,i.call(this,t)}finally{i.__calling=!1}}},on:function(e,t){var s=this._handlers[e]||(this._handlers[e]=[]);return s.push(t),{cancel:function(){var e=s.indexOf(t);~e&&s.splice(e,1)}}},set:function(e){this._set(t({},e)),this.root._lock||U(this.root)},_recompute:e,_set:function(e){var s=this._state,n={},i=!1;for(var r in e=t(this._staged,e),this._staged={},e)this._differs(e[r],s[r])&&(n[r]=i=!0);i&&(this._state=t(t({},s),e),this._recompute(n,this._state),this._bind&&this._bind(n,this._state),this._fragment&&(this.fire("state",{changed:n,current:this._state,previous:s}),this._fragment.p(n,this._state),this.fire("update",{changed:n,current:this._state,previous:s})))},_stage:function(e){t(this._staged,e)},_mount:function(e,t){this._fragment[this._fragment.i?"i":"m"](e,t||null)},_differs:function(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}};const k={};function M(e="core"){"chart"===e?window.__dw&&window.__dw.vis&&window.__dw.vis.meta&&(k[e]=window.__dw.vis.meta.locale||{}):k[e]="core"===e?dw.backend.__messages.core:Object.assign({},dw.backend.__messages.core,dw.backend.__messages[e])}function A(e,t="core"){if(e=e.trim(),k[t]||M(t),!k[t][e])return"MISSING:"+e;var s=k[t][e];return"string"==typeof s&&arguments.length>2&&(s=s.replace(/\$(\d)/g,(e,t)=>(t=2+Number(t),void 0===arguments[t]?e:arguments[t]))),s}function C(e,t,s,n){window._paq&&window._paq.push(["trackEvent",e,t,s,n])}function E(e){var s,a,o,l,c;x(this,e),this._state=t({icon:"api",size:"1em",color:"inherit",valign:"baseline",class:"",style:"",assetURL:null,spin:!1,timing:"linear",duration:"2s",uid:""},e.data),this._recompute({icon:1,assetURL:1},this._state),this._intro=!0,this._fragment=(s=this._state,{c(){a=h("span"),o=m("svg"),T(l=m("use"),"fill",s.color),y(l,"xlink:href",s.iconURL),T(o,"height",s.size),T(o,"width",s.size),_(o,"class","svelte-1th5ah8"),a.className=c="svg-icon "+s.class+" svelte-1th5ah8",a.dataset.uid=s.uid,T(a,"animation-timing-function",s.timing),T(a,"animation-duration",s.duration),T(a,"height",s.size),T(a,"width",s.size),T(a,"vertical-align",s.valign),L(a,"spin",s.spin)},m(e,t){i(e,a,t),n(a,o),n(o,l)},p(e,t){e.color&&T(l,"fill",t.color),e.iconURL&&y(l,"xlink:href",t.iconURL),e.size&&(T(o,"height",t.size),T(o,"width",t.size)),e.class&&c!==(c="svg-icon "+t.class+" svelte-1th5ah8")&&(a.className=c),e.uid&&(a.dataset.uid=t.uid),e.timing&&T(a,"animation-timing-function",t.timing),e.duration&&T(a,"animation-duration",t.duration),e.size&&(T(a,"height",t.size),T(a,"width",t.size)),e.valign&&T(a,"vertical-align",t.valign),(e.class||e.spin)&&L(a,"spin",t.spin)},d(e){e&&r(a)}}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor))}t(E.prototype,H),E.prototype._recompute=function(e,t){(e.icon||e.assetURL)&&this._differs(t.iconURL,t.iconURL=function({icon:e,assetURL:t}){return`${t||"/lib/icons/symbol/svg/sprite.symbol.svg"}#${e}`}(t))&&(e.iconURL=!0)};var z='<svg width="18" height="18" viewBox="0 0 30 30" xmlns="http://www.w3.org/2000/svg"><path d="M15.035 1.963c-.256 0-.511.1-.707.295l-7.07 7.07a1 1 0 00.707 1.707h4.07v15a2 2 0 002 2h2a2 2 0 002-2v-15h4.07a.999.999 0 00.707-1.707l-7.07-7.07a.999.999 0 00-.707-.295z"/></svg>';var I={close(){const{closeFunc:e}=this.get();e?e():(this.set({visible:!1}),this.fire("close"))}};function D(e,t){var s,n;function a(e){return"upgrade-info"===e.type?$:B}var o=a(t),l=o(e,t);return{c(){s=h("div"),l.c(),s.className=n="alert "+t.class+" svelte-1h26igv",s.dataset.uid=t.uid,L(s,"alert-intro","intro"===t.type),L(s,"alert-success","success"===t.type),L(s,"alert-warning","warning"===t.type),L(s,"alert-error","error"===t.type),L(s,"alert-info","info"===t.type),L(s,"alert-upgrade-info","upgrade-info"===t.type),L(s,"has-header",!!t.title)},m(e,t){i(e,s,t),l.m(s,null)},p(t,i){o===(o=a(i))&&l?l.p(t,i):(l.d(1),(l=o(e,i)).c(),l.m(s,null)),t.class&&n!==(n="alert "+i.class+" svelte-1h26igv")&&(s.className=n),t.uid&&(s.dataset.uid=i.uid),(t.class||t.type)&&(L(s,"alert-intro","intro"===i.type),L(s,"alert-success","success"===i.type),L(s,"alert-warning","warning"===i.type),L(s,"alert-error","error"===i.type),L(s,"alert-info","info"===i.type),L(s,"alert-upgrade-info","upgrade-info"===i.type)),(t.class||t.title)&&L(s,"has-header",!!i.title)},d(e){e&&r(s),l.d()}}}function B(e,t){var s,n,a,o,c=e._slotted.default,u=(t.closeable||t.title)&&j(e,t);return{c(){u&&u.c(),s=b("\n    "),c||(o=b("content"))},m(e,t){u&&u.m(e,t),i(e,s,t),c?(i(e,n||(n=f()),t),i(e,c,t),i(e,a||(a=f()),t)):i(e,o,t)},p(t,n){n.closeable||n.title?u?u.p(t,n):((u=j(e,n)).c(),u.m(s.parentNode,s)):u&&(u.d(1),u=null)},d(e){u&&u.d(e),e?(r(s),c||r(o)):(l(n,a,c),r(n),r(a))}}}function $(t,s){var a,o,l,c,u,d,p,m,f=A("upgrade-available"),g=A("upgrade-info");return{c(){a=h("div"),o=h("span"),l=b("\n    "),c=h("div"),u=h("span"),d=b(f),p=b(" "),m=h("noscript"),o.className="upgrade-icon svelte-1h26igv",a.className="icon",u.className="title svelte-1h26igv"},m(e,t){i(e,a,t),n(a,o),o.innerHTML=z,i(e,l,t),i(e,c,t),n(c,u),n(u,d),n(c,p),n(c,m),m.insertAdjacentHTML("afterend",g)},p:e,d(e){e&&(r(a),r(l),r(c))}}}function j(e,t){var s,a,o,l,c=t.title&&O(e,t),u=t.closeable&&W(e),d=t.title&&q();return{c(){s=h("div"),c&&c.c(),a=b(" "),u&&u.c(),o=b("\n    "),d&&d.c(),l=f(),s.className="svelte-1h26igv",L(s,"header",!!t.title)},m(e,t){i(e,s,t),c&&c.m(s,null),n(s,a),u&&u.m(s,null),i(e,o,t),d&&d.m(e,t),i(e,l,t)},p(t,n){n.title?c?c.p(t,n):((c=O(e,n)).c(),c.m(s,a)):c&&(c.d(1),c=null),n.closeable?u||((u=W(e)).c(),u.m(s,null)):u&&(u.d(1),u=null),t.title&&L(s,"header",!!n.title),n.title?d||((d=q()).c(),d.m(l.parentNode,l)):d&&(d.d(1),d=null)},d(e){e&&r(s),c&&c.d(),u&&u.d(),e&&r(o),d&&d.d(e),e&&r(l)}}}function O(e,t){var s,a;return{c(){s=h("div"),a=b(t.title),s.className="title svelte-1h26igv"},m(e,t){i(e,s,t),n(s,a)},p(e,t){e.title&&w(a,t.title)},d(e){e&&r(s)}}}function W(e,t){var s;function n(t){e.close()}return{c(){(s=h("button")).textContent="×",g(s,"click",n),s.type="button",_(s,"aria-label","close"),s.className="close svelte-1h26igv"},m(e,t){i(e,s,t)},d(e){e&&r(s),v(s,"click",n)}}}function q(e,t){var s;return{c(){(s=h("hr")).className="svelte-1h26igv"},m(e,t){i(e,s,t)},d(e){e&&r(s)}}}function F(e){var s,n,a,o;x(this,e),this._state=t({visible:!1,type:"",closeable:!0,class:"",closeFunc:!1,uid:"",title:""},e.data),this._intro=!0,this._slotted=e.slots||{},this._fragment=(s=this,n=this._state,o=n.visible&&D(s,n),{c(){o&&o.c(),a=f()},m(e,t){o&&o.m(e,t),i(e,a,t)},p(e,t){t.visible?o?o.p(e,t):((o=D(s,t)).c(),o.m(a.parentNode,a)):o&&(o.d(1),o=null)},d(e){o&&o.d(e),e&&r(a)}}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor))}t(F.prototype,H),t(F.prototype,I);var V={publish(){C("Chart Editor","publish"),this.fire("publish")},unpublish(){C("Chart Editor","unpublish"),this.fire("unpublish")}};function G(e,t,s){const n=Object.create(e);return n.step=t[s],n.i=s,n}function P(e,t){var s,n,a=A("publish / published"),o={assetURL:t.assetURL,icon:"cloud-check",color:"#000000",size:"30px"},l=new E({root:e.root,store:e.store,data:o});return{c(){l._fragment.c(),s=b("\n    "),(n=h("div")).className="message svelte-di7o7w"},m(e,t){l._mount(e,t),i(e,s,t),i(e,n,t),n.innerHTML=a},p(e,t){var s={};e.assetURL&&(s.assetURL=t.assetURL),l._set(s)},d(e){l.destroy(e),e&&(r(s),r(n))}}}function J(e,t){var s,n,a=A("publish / publish-success"),o={assetURL:t.assetURL,icon:"cloud-check",color:"#000000",size:"30px"},l=new E({root:e.root,store:e.store,data:o});return{c(){l._fragment.c(),s=b("\n    "),(n=h("div")).className="message svelte-di7o7w"},m(e,t){l._mount(e,t),i(e,s,t),i(e,n,t),n.innerHTML=a},p(e,t){var s={};e.assetURL&&(s.assetURL=t.assetURL),l._set(s)},d(e){l.destroy(e),e&&(r(s),r(n))}}}function K(e,t){var s,n,a=A("publish / republish"),o={assetURL:t.assetURL,icon:"cloud-sync",color:"#FFB800",size:"30px"},l=new E({root:e.root,store:e.store,data:o});return{c(){l._fragment.c(),s=b("\n    "),(n=h("div")).className="message svelte-di7o7w"},m(e,t){l._mount(e,t),i(e,s,t),i(e,n,t),n.innerHTML=a},p(e,t){var s={};e.assetURL&&(s.assetURL=t.assetURL),l._set(s)},d(e){l.destroy(e),e&&(r(s),r(n))}}}function X(e,t){var s,n,a=A("publish / progress / publishing"),o={assetURL:t.assetURL,icon:"cloud-sync",color:"#858585",size:"30px"},l=new E({root:e.root,store:e.store,data:o});return{c(){l._fragment.c(),s=b("\n    "),(n=h("div")).className="message svelte-di7o7w"},m(e,t){l._mount(e,t),i(e,s,t),i(e,n,t),n.innerHTML=a},p(e,t){var s={};e.assetURL&&(s.assetURL=t.assetURL),l._set(s)},d(e){l.destroy(e),e&&(r(s),r(n))}}}function Z(e,t){var s,n,a=A("publish / publish-btn-intro"),o={assetURL:t.assetURL,icon:"cloud-dotted",color:"#858585",size:"30px",class:"pt-2"},l=new E({root:e.root,store:e.store,data:o});return{c(){l._fragment.c(),s=b("\n    "),(n=h("div")).className="message pt-2 svelte-di7o7w"},m(e,t){l._mount(e,t),i(e,s,t),i(e,n,t),n.innerHTML=a},p(e,t){var s={};e.assetURL&&(s.assetURL=t.assetURL),l._set(s)},d(e){l.destroy(e),e&&(r(s),r(n))}}}function Q(e,t){var s,n,a=A("publish / progress / unpublished"),o={assetURL:t.assetURL,icon:"cloud-dotted",color:"#858585",size:"30px"},l=new E({root:e.root,store:e.store,data:o});return{c(){l._fragment.c(),s=b("\n    "),(n=h("div")).className="message svelte-di7o7w"},m(e,t){l._mount(e,t),i(e,s,t),i(e,n,t),n.innerHTML=a},p(e,t){var s={};e.assetURL&&(s.assetURL=t.assetURL),l._set(s)},d(e){l.destroy(e),e&&(r(s),r(n))}}}function Y(e,t){var s,n,a=A("publish / progress / unpublishing"),o={assetURL:t.assetURL,icon:"cloud-sync",color:"#858585",size:"30px"},l=new E({root:e.root,store:e.store,data:o});return{c(){l._fragment.c(),s=b("\n    "),(n=h("div")).className="message svelte-di7o7w"},m(e,t){l._mount(e,t),i(e,s,t),i(e,n,t),n.innerHTML=a},p(e,t){var s={};e.assetURL&&(s.assetURL=t.assetURL),l._set(s)},d(e){l.destroy(e),e&&(r(s),r(n))}}}function ee(e,t){var s;function n(e){return e.publishing?ie:ne}var a=n(t),o=a(e,t);return{c(){s=h("span"),o.c(),s.className="button-publish svelte-di7o7w",L(s,"is-publishing",t.publishing)},m(e,t){i(e,s,t),o.m(s,null)},p(t,i){a===(a=n(i))&&o?o.p(t,i):(o.d(1),(o=a(e,i)).c(),o.m(s,null)),t.publishing&&L(s,"is-publishing",i.publishing)},d(e){e&&r(s),o.d()}}}function te(e,t){var s;function n(e){return e.publishing?ae:re}var a=n(t),o=a(e,t);return{c(){s=h("span"),o.c(),s.className="button-republish"},m(e,t){i(e,s,t),o.m(s,null)},p(t,i){a===(a=n(i))&&o?o.p(t,i):(o.d(1),(o=a(e,i)).c(),o.m(s,null))},d(e){e&&r(s),o.d()}}}function se(t,s){var a,o,l=A("publish / unpublishing-btn");return{c(){a=h("span"),o=b(l),a.className="title"},m(e,t){i(e,a,t),n(a,o)},p:e,d(e){e&&r(a)}}}function ne(e,t){var s,a,o,l=A("publish / publish-btn"),c={assetURL:t.assetURL,icon:"cloud-upload",size:"30px",color:"#ffffff",class:"cloud"},u=new E({root:e.root,store:e.store,data:c});return{c(){u._fragment.c(),s=b("\n                "),a=h("span"),o=b(l)},m(e,t){u._mount(e,t),i(e,s,t),i(e,a,t),n(a,o)},p(e,t){var s={};e.assetURL&&(s.assetURL=t.assetURL),u._set(s)},d(e){u.destroy(e),e&&(r(s),r(a))}}}function ie(e,t){var s,a,o,l=A("publish / publishing-btn"),c={assetURL:t.assetURL,icon:"refresh",spin:!0,size:"28px",color:"#ffffff",valign:"middle",class:"mr-1"},u=new E({root:e.root,store:e.store,data:c});return{c(){u._fragment.c(),s=b("\n                "),a=h("span"),o=b(l)},m(e,t){u._mount(e,t),i(e,s,t),i(e,a,t),n(a,o)},p(e,t){var s={};e.assetURL&&(s.assetURL=t.assetURL),u._set(s)},d(e){u.destroy(e),e&&(r(s),r(a))}}}function re(e,t){var s,a,o,l=A("publish / republish-btn"),c={assetURL:t.assetURL,icon:"refresh",size:"28px",color:"#ffffff",valign:"middle",class:"mr-1"},u=new E({root:e.root,store:e.store,data:c});return{c(){u._fragment.c(),s=b("\n                "),a=h("span"),o=b(l)},m(e,t){u._mount(e,t),i(e,s,t),i(e,a,t),n(a,o)},p(e,t){var s={};e.assetURL&&(s.assetURL=t.assetURL),u._set(s)},d(e){u.destroy(e),e&&(r(s),r(a))}}}function ae(e,t){var s,a,o,l=A("publish / publishing-btn"),c={assetURL:t.assetURL,icon:"refresh",spin:!0,size:"28px",color:"#ffffff",valign:"middle",class:"mr-1"},u=new E({root:e.root,store:e.store,data:c});return{c(){u._fragment.c(),s=b("\n                "),a=h("span"),o=b(l)},m(e,t){u._mount(e,t),i(e,s,t),i(e,a,t),n(a,o)},p(e,t){var s={};e.assetURL&&(s.assetURL=t.assetURL),u._set(s)},d(e){u.destroy(e),e&&(r(s),r(a))}}}function oe(e,t){for(var s,n=t.progress,a=[],o=0;o<n.length;o+=1)a[o]=de(e,G(t,n,o));return{c(){s=h("ul");for(var e=0;e<a.length;e+=1)a[e].c();s.className="publish-progress unstyled svelte-di7o7w"},m(e,t){i(e,s,t);for(var n=0;n<a.length;n+=1)a[n].m(s,null)},p(t,i){if(t.progress||t.assetURL){n=i.progress;for(var r=0;r<n.length;r+=1){const o=G(i,n,r);a[r]?a[r].p(t,o):(a[r]=de(e,o),a[r].c(),a[r].m(s,null))}for(;r<a.length;r+=1)a[r].d(1);a.length=n.length}},d(e){e&&r(s),d(a,e)}}}function le(e,t){var s,a,l,c=A("publish / status / "+t.step);function u(e){return e.i<e.progress.length-1?ue:ce}var d=u(t),p=d(e,t);return{c(){s=h("li"),p.c(),a=b(" "),l=h("noscript"),s.className="svelte-di7o7w"},m(e,t){i(e,s,t),p.m(s,null),n(s,a),n(s,l),l.insertAdjacentHTML("afterend",c)},p(t,n){d===(d=u(n))&&p?p.p(t,n):(p.d(1),(p=d(e,n)).c(),p.m(s,a)),t.progress&&c!==(c=A("publish / status / "+n.step))&&(o(l),l.insertAdjacentHTML("afterend",c))},d(e){e&&r(s),p.d()}}}function ce(e,t){var s={assetURL:t.assetURL,icon:"loading-spinner",size:"18px",valign:"middle",class:"mr-2",spin:!0,timing:"steps(12)",duration:"1.5s"},n=new E({root:e.root,store:e.store,data:s});return{c(){n._fragment.c()},m(e,t){n._mount(e,t)},p(e,t){var s={};e.assetURL&&(s.assetURL=t.assetURL),n._set(s)},d(e){n.destroy(e)}}}function ue(e,t){var s={assetURL:t.assetURL,icon:"check-circle",size:"18px",color:"#468847",valign:"middle",class:"mr-2"},n=new E({root:e.root,store:e.store,data:s});return{c(){n._fragment.c()},m(e,t){n._mount(e,t)},p(e,t){var s={};e.assetURL&&(s.assetURL=t.assetURL),n._set(s)},d(e){n.destroy(e)}}}function de(e,t){var s,n=t.step&&""!==t.step&&le(e,t);return{c(){n&&n.c(),s=f()},m(e,t){n&&n.m(e,t),i(e,s,t)},p(t,i){i.step&&""!==i.step?n?n.p(t,i):((n=le(e,i)).c(),n.m(s.parentNode,s)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&r(s)}}}function pe(e,t){var s,a,o,l,c,u,d=A("publish / unpublish-intro"),p=A("publish / unpublish-btn"),m={assetURL:t.assetURL,icon:"undo",size:"1.2em",valign:"-0.2em"},f=new E({root:e.root,store:e.store,data:m});function _(t){e.unpublish()}return{c(){s=h("p"),a=h("noscript"),o=b("\n    "),l=h("button"),f._fragment.c(),c=b("\n        "),u=h("noscript"),g(l,"click",_),l.className="plain-link unpublish-button svelte-di7o7w",s.className="unpublish mt-2 mb-2 svelte-di7o7w"},m(e,t){i(e,s,t),n(s,a),a.insertAdjacentHTML("beforebegin",d),n(s,o),n(s,l),f._mount(l,null),n(l,c),n(l,u),u.insertAdjacentHTML("afterend",p)},p(e,t){var s={};e.assetURL&&(s.assetURL=t.assetURL),f._set(s)},d(e){e&&r(s),f.destroy(),v(l,"click",_)}}}function he(e,t){var s,i=new F({root:e.root,store:e.store,slots:{default:p()},data:{type:"error",visible:"true",class:"mt-4 mb-5"}});return{c(){s=b(t.publishError),i._fragment.c()},m(e,t){n(i._slotted.default,s),i._mount(e,t)},p(e,t){e.publishError&&w(s,t.publishError)},d(e){i.destroy(e)}}}function me(e,t){var s,n,a,o=A("publish / publish-info-1"),l=A("publish / publish-info-2");return{c(){s=h("p"),n=b("\n"),a=h("p"),s.className="publish-info mt-4 svelte-di7o7w",a.className="publish-info mb-6 svelte-di7o7w"},m(e,t){i(e,s,t),s.innerHTML=o,i(e,n,t),i(e,a,t),a.innerHTML=l},d(e){e&&(r(s),r(n),r(a))}}}function be(e,t){var s;function n(e){return e.redirectDisabled?ge:fe}var a=n(t),o=a(e,t);return{c(){s=h("div"),o.c(),s.className="embed-alert svelte-di7o7w"},m(e,t){i(e,s,t),o.m(s,null)},p(t,i){a===(a=n(i))&&o?o.p(t,i):(o.d(1),(o=a(e,i)).c(),o.m(s,null))},d(e){e&&r(s),o.d()}}}function fe(e,t){var s,n,a=A("publish / update-embed"),o={assetURL:t.assetURL,icon:"info-circle",size:"20px",color:"#3a87ad"},l=new E({root:e.root,store:e.store,data:o});return{c(){l._fragment.c(),s=b("\n        "),(n=h("p")).className="embed-message svelte-di7o7w"},m(e,t){l._mount(e,t),i(e,s,t),i(e,n,t),n.innerHTML=a},p(e,t){var s={};e.assetURL&&(s.assetURL=t.assetURL),l._set(s)},d(e){l.destroy(e),e&&(r(s),r(n))}}}function ge(e,t){var s,n,a=A("publish / replace-embed"),o={assetURL:t.assetURL,icon:"warning",size:"20px",color:"#FFB800"},l=new E({root:e.root,store:e.store,data:o});return{c(){l._fragment.c(),s=b("\n        "),(n=h("p")).className="embed-message svelte-di7o7w"},m(e,t){l._mount(e,t),i(e,s,t),i(e,n,t),n.innerHTML=a},p(e,t){var s={};e.assetURL&&(s.assetURL=t.assetURL),l._set(s)},d(e){l.destroy(e),e&&(r(s),r(n))}}}function ve(e){x(this,e),this._state=t({published:!1,publishing:!1,publishStarted:0,now:0,publishError:!1,publishSuccess:!1,needsRepublish:!1,progress:[],redirectDisabled:!1,publicVersion:0,assetURL:null},e.data),this._recompute({publishStarted:1,now:1,progress:1,publishing:1},this._state),this._intro=!0,this._fragment=function(e,t){var s,a,o,l,c,u,d,m,_,y,w;function T(e){return e.unpublishing?Y:e.unpublished?Q:e.published||e.publishing?e.publishing?X:e.needsRepublish&&!e.publishing?K:e.published&&e.publishSuccess&&!e.needsRepublish?J:e.published&&!e.needsRepublish?P:void 0:Z}var N=T(t),U=N&&N(e,t);function x(e){return e.unpublishing?se:e.published?te:ee}var R=x(t),S=R(e,t);function H(t){e.publish()}var k=t.publishing&&t.publishWait>3e3&&oe(e,t),M=t.published&&!t.publishing&&!t.unpublishing&&pe(e,t),A=t.publishError&&he(e,t),C=!t.published&&!t.unpublished&&me(),E=t.published&&t.publishSuccess&&t.publicVersion>1&&be(e,t),z={type:t.redirectDisabled?"warning":"info",visible:t.published&&t.publishSuccess&&t.publicVersion>1,class:"mt-4 mb-4"},I=new F({root:e.root,store:e.store,slots:{default:p()},data:z});return{c(){s=h("div"),U&&U.c(),a=b("\n\n    "),o=h("div"),l=h("button"),S.c(),u=b("\n\n    \n    "),k&&k.c(),d=b("\n\n\n"),M&&M.c(),m=b("\n\n\n"),A&&A.c(),_=b("\n\n\n"),C&&C.c(),y=b("\n\n\n"),E&&E.c(),w=f(),I._fragment.c(),g(l,"click",H),l.disabled=c=t.publishing||t.unpublishing,l.className="button-wrapper svelte-di7o7w",L(l,"is-unpublishing",t.unpublishing),o.className="action svelte-di7o7w",s.className="publish-status svelte-di7o7w",L(s,"is-busy",t.publishing||t.unpublishing),L(s,"is-published",t.published&&!t.unpublishing&&!t.publishing&&!t.needsRepublish&&!t.publishSuccess),L(s,"alert",t.needsRepublish&&!t.publishing),L(s,"alert-success",t.publishSuccess)},m(e,t){i(e,s,t),U&&U.m(s,null),n(s,a),n(s,o),n(o,l),S.m(l,null),n(s,u),k&&k.m(s,null),i(e,d,t),M&&M.m(e,t),i(e,m,t),A&&A.m(e,t),i(e,_,t),C&&C.m(e,t),i(e,y,t),E&&E.m(I._slotted.default,null),n(I._slotted.default,w),I._mount(e,t)},p(t,n){N===(N=T(n))&&U?U.p(t,n):(U&&U.d(1),(U=N&&N(e,n))&&U.c(),U&&U.m(s,a)),R===(R=x(n))&&S?S.p(t,n):(S.d(1),(S=R(e,n)).c(),S.m(l,null)),(t.publishing||t.unpublishing)&&c!==(c=n.publishing||n.unpublishing)&&(l.disabled=c),t.unpublishing&&L(l,"is-unpublishing",n.unpublishing),n.publishing&&n.publishWait>3e3?k?k.p(t,n):((k=oe(e,n)).c(),k.m(s,null)):k&&(k.d(1),k=null),(t.publishing||t.unpublishing)&&L(s,"is-busy",n.publishing||n.unpublishing),(t.published||t.unpublishing||t.publishing||t.needsRepublish||t.publishSuccess)&&L(s,"is-published",n.published&&!n.unpublishing&&!n.publishing&&!n.needsRepublish&&!n.publishSuccess),(t.needsRepublish||t.publishing)&&L(s,"alert",n.needsRepublish&&!n.publishing),t.publishSuccess&&L(s,"alert-success",n.publishSuccess),!n.published||n.publishing||n.unpublishing?M&&(M.d(1),M=null):M?M.p(t,n):((M=pe(e,n)).c(),M.m(m.parentNode,m)),n.publishError?A?A.p(t,n):((A=he(e,n)).c(),A.m(_.parentNode,_)):A&&(A.d(1),A=null),n.published||n.unpublished?C&&(C.d(1),C=null):C||((C=me()).c(),C.m(y.parentNode,y)),n.published&&n.publishSuccess&&n.publicVersion>1?E?E.p(t,n):((E=be(e,n)).c(),E.m(w.parentNode,w)):E&&(E.d(1),E=null);var i={};t.redirectDisabled&&(i.type=n.redirectDisabled?"warning":"info"),(t.published||t.publishSuccess||t.publicVersion)&&(i.visible=n.published&&n.publishSuccess&&n.publicVersion>1),I._set(i)},d(e){e&&r(s),U&&U.d(),S.d(),v(l,"click",H),k&&k.d(),e&&r(d),M&&M.d(e),e&&r(m),A&&A.d(e),e&&r(_),C&&C.d(e),e&&r(y),E&&E.d(),I.destroy(e)}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),U(this))}t(ve.prototype,H),t(ve.prototype,V),ve.prototype._recompute=function(e,t){(e.publishStarted||e.now)&&this._differs(t.publishWait,t.publishWait=function({publishStarted:e,now:t}){return e>0?t-e:0}(t))&&(e.publishWait=!0),(e.progress||e.publishing)&&this._differs(t.publishSuccess,t.publishSuccess=function({progress:e,publishing:t}){return e&&e.includes("done")&&!t}(t))&&(e.publishSuccess=!0)};const _e={};function ye(e="core"){"chart"===e?window.__dw&&window.__dw.vis&&window.__dw.vis.meta&&(_e[e]=window.__dw.vis.meta.locale||{}):_e[e]="core"===e?dw.backend.__messages.core:Object.assign({},dw.backend.__messages.core,dw.backend.__messages[e])}function we(e,t="core"){if(e=e.trim(),_e[t]||ye(t),!_e[t][e])return"MISSING:"+e;var s=_e[t][e];return"string"==typeof s&&arguments.length>2&&(s=s.replace(/\$(\d)/g,(e,t)=>(t=2+Number(t),void 0===arguments[t]?e:arguments[t]))),s}function Te(e,t,s,n){window._paq&&window._paq.push(["trackEvent",e,t,s,n])}var Le={exports:{}};
/*!
	 * JavaScript Cookie v2.2.1
	 * https://github.com/js-cookie/js-cookie
	 *
	 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
	 * Released under the MIT license
	 */!function(e,t){var s;s=function(){function e(){for(var e=0,t={};e<arguments.length;e++){var s=arguments[e];for(var n in s)t[n]=s[n]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function s(n){function i(){}function r(t,s,r){if("undefined"!=typeof document){"number"==typeof(r=e({path:"/"},i.defaults,r)).expires&&(r.expires=new Date(1*new Date+864e5*r.expires)),r.expires=r.expires?r.expires.toUTCString():"";try{var a=JSON.stringify(s);/^[\{\[]/.test(a)&&(s=a)}catch(e){}s=n.write?n.write(s,t):encodeURIComponent(String(s)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var o="";for(var l in r)r[l]&&(o+="; "+l,!0!==r[l]&&(o+="="+r[l].split(";")[0]));return document.cookie=t+"="+s+o}}function a(e,s){if("undefined"!=typeof document){for(var i={},r=document.cookie?document.cookie.split("; "):[],a=0;a<r.length;a++){var o=r[a].split("="),l=o.slice(1).join("=");s||'"'!==l.charAt(0)||(l=l.slice(1,-1));try{var c=t(o[0]);if(l=(n.read||n)(l,c)||t(l),s)try{l=JSON.parse(l)}catch(e){}if(i[c]=l,e===c)break}catch(e){}}return e?i[e]:i}}return i.set=r,i.get=function(e){return a(e,!1)},i.getJSON=function(e){return a(e,!0)},i.remove=function(t,s){r(t,"",e(s,{expires:-1}))},i.defaults={},i.withConverter=s,i}((function(){}))},e.exports=s()}(Le);var Ne=Le.exports;const Ue=new Set(["get","head","options","trace"]);function xe(e,t={}){if(!t.fetch)try{t.fetch=window.fetch}catch(e){throw new Error("Neither options.fetch nor window.fetch is defined.")}if(!t.baseUrl)try{t.baseUrl="//"+window.dw.backend.__api_domain}catch(e){throw new Error("Neither options.baseUrl nor window.dw is defined.")}const{payload:s,baseUrl:n,fetch:i,raw:r,...a}={payload:null,raw:!1,method:"GET",mode:"cors",credentials:"include",...t,headers:{"Content-Type":"application/json",...t.headers}},o=`${n.replace(/\/$/,"")}/${e.replace(/^\//,"")}`;let l;if(s&&(a.body=JSON.stringify(s)),a.headers["Content-Type"].startsWith("multipart/")&&delete a.headers["Content-Type"],Ue.has(a.method.toLowerCase()))l=i(o,a);else{const e=Ne.get("crumb");e?(a.headers["X-CSRF-Token"]=e,l=i(o,a)):l=xe("/v3/me",{fetch:i,baseUrl:n}).then(()=>{const e=Ne.get("crumb");e&&(a.headers["X-CSRF-Token"]=e)}).catch(()=>{}).then(()=>i(o,a))}return l.then(e=>{if(r)return e;if(!e.ok)throw new He(e);if(204===e.status||!e.headers.get("content-type"))return e;const t=e.headers.get("content-type").split(";")[0];return"application/json"===t?e.json():"image/png"===t||"application/pdf"===t?e.blob():e.text()})}xe.get=Se("GET"),xe.patch=Se("PATCH"),xe.put=Se("PUT");const Re=xe.post=Se("POST");function Se(e){return(t,s)=>{if(s&&s.method)throw new Error(`Setting option.method is not allowed in httpReq.${e.toLowerCase()}()`);return xe(t,{...s,method:e})}}xe.head=Se("HEAD"),xe.delete=Se("DELETE");class He extends Error{constructor(e){super(),this.name="HttpReqError",this.status=e.status,this.statusText=e.statusText,this.message=`[${e.status}] ${e.statusText}`,this.response=e}}var ke={open(){this.set({open:!0})},dismiss(){this.set({open:!1}),this.fire("dismiss")},confirm(){this.set({open:!1}),this.fire("confirm")},handleKeystroke(e){const{open:t}=this.get();t&&"Escape"===e&&this.dismiss()}};function Me(e,t){var s,a,c,u,d,p,m,y,w,T,L,N,U,x,R,S,H,k,M=e._slotted.default,A=new E({root:e.root,store:e.store,data:{icon:"close",size:"20px"}});function C(t){e.dismiss()}function z(t){e.dismiss()}var I=t.confirmButtonIcon&&Ae(e,t);function D(t){e.confirm()}function B(t){t.stopPropagation(),e.fire("keyup",t)}function $(t){e.dismiss()}return{c(){s=h("div"),a=h("div"),c=h("button"),A._fragment.c(),u=b("\n        "),d=h("div"),p=h("h1"),m=b("\n            "),T=b("\n            "),L=h("div"),N=h("button"),U=b("\n                "),x=h("button"),I&&I.c(),R=b(" "),S=h("noscript"),H=b("\n"),k=h("div"),g(c,"click",C),c.type="button",c.className="close svelte-1f9lfqa",_(c,"aria-label",t.backButtonText),p.className="modal-title mb-4 svelte-1f9lfqa",g(N,"click",z),N.className="btn back svelte-1f9lfqa",g(x,"click",D),x.className="btn btn-danger svelte-1f9lfqa",L.className="actions pt-4 mt-4 svelte-1f9lfqa",d.className="modal-content svelte-1f9lfqa",g(a,"keyup",B),a.className="modal-body",s.className="modal",g(k,"click",$),k.className="modal-backdrop"},m(e,r){i(e,s,r),n(s,a),n(a,c),A._mount(c,null),n(a,u),n(a,d),n(d,p),p.innerHTML=t.title,n(d,m),M&&(n(d,y||(y=f())),n(d,M),n(d,w||(w=f()))),n(d,T),n(d,L),n(L,N),N.innerHTML=t.backButtonText,n(L,U),n(L,x),I&&I.m(x,null),n(x,R),n(x,S),S.insertAdjacentHTML("afterend",t.confirmButtonText),i(e,H,r),i(e,k,r)},p(t,s){t.backButtonText&&_(c,"aria-label",s.backButtonText),t.title&&(p.innerHTML=s.title),t.backButtonText&&(N.innerHTML=s.backButtonText),s.confirmButtonIcon?I?I.p(t,s):((I=Ae(e,s)).c(),I.m(x,R)):I&&(I.d(1),I=null),t.confirmButtonText&&(o(S),S.insertAdjacentHTML("afterend",s.confirmButtonText))},d(e){e&&r(s),A.destroy(),v(c,"click",C),M&&(l(y,w,M),r(y),r(w)),v(N,"click",z),I&&I.d(),v(x,"click",D),v(a,"keyup",B),e&&(r(H),r(k)),v(k,"click",$)}}}function Ae(e,t){var s={icon:t.confirmButtonIcon,class:"mr-1",size:"1.3em",valign:"-0.3em"},n=new E({root:e.root,store:e.store,data:s});return{c(){n._fragment.c()},m(e,t){n._mount(e,t)},p(e,t){var s={};e.confirmButtonIcon&&(s.icon=t.confirmButtonIcon),n._set(s)},d(e){n.destroy(e)}}}function Ce(e){x(this,e),this._state=t({title:"Title",confirmButtonText:"Confirm",confirmButtonIcon:!1,backButtonText:"Back",open:!1},e.data),this._intro=!0,this._slotted=e.slots||{},this._fragment=function(e,t){var s;function n(t){e.handleKeystroke(t.key)}window.addEventListener("keydown",n);var a=t.open&&Me(e,t);return{c(){a&&a.c(),s=f()},m(e,t){a&&a.m(e,t),i(e,s,t)},p(t,n){n.open?a?a.p(t,n):((a=Me(e,n)).c(),a.m(s.parentNode,s)):a&&(a.d(1),a=null)},d(e){window.removeEventListener("keydown",n),a&&a.d(e),e&&r(s)}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),U(this))}t(Ce.prototype,H),t(Ce.prototype,ke);var Ee={show(){const e=setTimeout(()=>{this.set({visible:!0})},400);this.set({t:e})},hide(){const{t:e}=this.get();clearTimeout(e),this.set({visible:!1})}};function ze(e,t){var s,a,o,l,c,d=e._slotted.default,p="help"===t.type&&Ie(),m="upgrade-info"===t.type&&De();return{c(){s=h("div"),p&&p.c(),a=b(" "),m&&m.c(),o=b("\n        "),s.className=c="content "+t.type+" svelte-1qzgns1"},m(e,t){i(e,s,t),p&&p.m(s,null),n(s,a),m&&m.m(s,null),n(s,o),d&&(n(s,l||(l=f())),n(s,d))},p(e,t){"help"===t.type?p||((p=Ie()).c(),p.m(s,a)):p&&(p.d(1),p=null),"upgrade-info"===t.type?m||((m=De()).c(),m.m(s,o)):m&&(m.d(1),m=null),e.type&&c!==(c="content "+t.type+" svelte-1qzgns1")&&(s.className=c)},d(e){e&&r(s),p&&p.d(),m&&m.d(),d&&u(l,d)}}}function Ie(e,t){var s;return{c(){(s=h("i")).className="hat-icon im im-graduation-hat svelte-1qzgns1"},m(e,t){i(e,s,t)},d(e){e&&r(s)}}}function De(e,t){var s,a,o=A("upgrade-available");return{c(){s=h("div"),a=b(o),s.className="content-header svelte-1qzgns1"},m(e,t){i(e,s,t),n(s,a)},d(e){e&&r(s)}}}function Be(e){x(this,e),this.refs={},this._state=t({visible:!1,class:"",type:"help",uid:""},e.data),this._recompute({type:1},this._state),this._intro=!0,this._slotted=e.slots||{},this._fragment=function(e,t){var s,a,o,l,c,u=t.visible&&ze(e,t);function d(t){e.show()}function p(t){e.hide()}return{c(){s=h("div"),a=h("span"),l=b("\n    "),u&&u.c(),a.className=o="help-icon "+t.type+" svelte-1qzgns1",L(a,"visible",t.visible),g(s,"mouseenter",d),g(s,"mouseleave",p),s.className=c="help "+t.class+" "+t.type+" svelte-1qzgns1",s.dataset.uid=t.uid},m(r,o){i(r,s,o),n(s,a),a.innerHTML=t.helpIcon,n(s,l),u&&u.m(s,null),e.refs.helpDisplay=s},p(t,n){t.helpIcon&&(a.innerHTML=n.helpIcon),t.type&&o!==(o="help-icon "+n.type+" svelte-1qzgns1")&&(a.className=o),(t.type||t.visible)&&L(a,"visible",n.visible),n.visible?u?u.p(t,n):((u=ze(e,n)).c(),u.m(s,null)):u&&(u.d(1),u=null),(t.class||t.type)&&c!==(c="help "+n.class+" "+n.type+" svelte-1qzgns1")&&(s.className=c),t.uid&&(s.dataset.uid=n.uid)},d(t){t&&r(s),u&&u.d(),v(s,"mouseenter",d),v(s,"mouseleave",p),e.refs.helpDisplay===s&&(e.refs.helpDisplay=null)}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor))}t(Be.prototype,H),t(Be.prototype,Ee),Be.prototype._recompute=function(e,t){e.type&&this._differs(t.helpIcon,t.helpIcon=function({type:e}){return"upgrade-info"===e?z:"?"}(t))&&(e.helpIcon=!0)};var $e="100px";function je(e,t){var s,i={class:t.helpClass},r=new Be({root:e.root,store:e.store,slots:{default:p()},data:i});return{c(){s=h("div"),r._fragment.c()},m(e,i){n(r._slotted.default,s),s.innerHTML=t.help,r._mount(e,i)},p(e,t){e.help&&(s.innerHTML=t.help);var n={};e.helpClass&&(n.class=t.helpClass),r._set(n)},d(e){r.destroy(e)}}}function Oe(e,t){var s,a,o,l=t.labelHelp&&We(e,t);return{c(){s=h("label"),a=h("noscript"),o=b(" "),l&&l.c(),T(s,"width",t.labelWidth||$e),s.className="control-label svelte-1ykzs2h",L(s,"disabled",t.disabled)},m(e,r){i(e,s,r),n(s,a),a.insertAdjacentHTML("beforebegin",t.label),n(s,o),l&&l.m(s,null)},p(t,n){t.label&&(!function(e){for(;e.previousSibling;)e.parentNode.removeChild(e.previousSibling)}(a),a.insertAdjacentHTML("beforebegin",n.label)),n.labelHelp?l?l.p(t,n):((l=We(e,n)).c(),l.m(s,null)):l&&(l.d(1),l=null),t.labelWidth&&T(s,"width",n.labelWidth||$e),t.disabled&&L(s,"disabled",n.disabled)},d(e){e&&r(s),l&&l.d()}}}function We(e,t){var s;return{c(){(s=h("p")).className="mini-help mt-1"},m(e,n){i(e,s,n),s.innerHTML=t.labelHelp},p(e,t){e.labelHelp&&(s.innerHTML=t.labelHelp)},d(e){e&&r(s)}}}function qe(e,t){var s,n;return{c(){T(s=h("p"),"padding-left",t.inline?0:t.labelWidth||$e),s.className=n="mt-1 mini-help "+t.type+" svelte-1ykzs2h",L(s,"mini-help-block",!t.inline)},m(e,n){i(e,s,n),s.innerHTML=t.miniHelp},p(e,t){e.miniHelp&&(s.innerHTML=t.miniHelp),(e.inline||e.labelWidth)&&T(s,"padding-left",t.inline?0:t.labelWidth||$e),e.type&&n!==(n="mt-1 mini-help "+t.type+" svelte-1ykzs2h")&&(s.className=n),(e.type||e.inline)&&L(s,"mini-help-block",!t.inline)},d(e){e&&r(s)}}}function Fe(e){var s,a,o,l,u,d,p,m,f,g,v,_;x(this,e),this._state=t({disabled:!1,help:!1,helpClass:!1,miniHelp:!1,label:!1,labelHelp:!1,class:"",inline:!1,labelWidth:!1,type:"default",valign:"baseline",uid:""},e.data),this._intro=!0,this._slotted=e.slots||{},this._fragment=(s=this,a=this._state,f=s._slotted.default,g=a.help&&je(s,a),v=a.label&&Oe(s,a),_=a.miniHelp&&qe(0,a),{c(){g&&g.c(),o=b("\n\n"),l=h("div"),v&&v.c(),u=b("\n    "),d=h("div"),p=b("\n    "),_&&_.c(),d.className="controls svelte-1ykzs2h",T(d,"width","calc(100% - "+(a.labelWidth||$e)+" - 32px)"),L(d,"form-inline",a.inline),l.className=m="control-group vis-option-group vis-option-group-"+a.type+" label-"+a.valign+" "+a.class+" svelte-1ykzs2h",l.dataset.uid=a.uid},m(e,t){g&&g.m(e,t),i(e,o,t),i(e,l,t),v&&v.m(l,null),n(l,u),n(l,d),f&&n(d,f),n(l,p),_&&_.m(l,null)},p(e,t){t.help?g?g.p(e,t):((g=je(s,t)).c(),g.m(o.parentNode,o)):g&&(g.d(1),g=null),t.label?v?v.p(e,t):((v=Oe(s,t)).c(),v.m(l,u)):v&&(v.d(1),v=null),e.labelWidth&&T(d,"width","calc(100% - "+(t.labelWidth||$e)+" - 32px)"),e.inline&&L(d,"form-inline",t.inline),t.miniHelp?_?_.p(e,t):((_=qe(0,t)).c(),_.m(l,null)):_&&(_.d(1),_=null),(e.type||e.valign||e.class)&&m!==(m="control-group vis-option-group vis-option-group-"+t.type+" label-"+t.valign+" "+t.class+" svelte-1ykzs2h")&&(l.className=m),e.uid&&(l.dataset.uid=t.uid)},d(e){g&&g.d(e),e&&(r(o),r(l)),v&&v.d(),f&&c(d,f),_&&_.d()}}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),U(this))}function Ve({changed:e,previous:t}){t&&e.value&&this.set({indeterminate:!1})}function Ge(e,t,s){const n=Object.create(e);return n.opt=t[s],n}function Pe(e,t){var s,n=t.opt.help;return{c(){(s=h("div")).className="help svelte-b3e9e4"},m(e,t){i(e,s,t),s.innerHTML=n},p(e,t){e.options&&n!==(n=t.opt.help)&&(s.innerHTML=n)},d(e){e&&r(s)}}}function Je(e,t){var s,a,o,l,c,u,d,p,m,f=t.opt.label;function y(){e.set({value:a.__value})}var w=t.opt.help&&Pe(0,t);return{c(){s=h("label"),a=h("input"),l=b("\n            "),c=h("span"),u=b(" "),d=h("span"),p=b("\n            "),w&&w.c(),e._bindingGroups[0].push(a),g(a,"change",y),_(a,"type","radio"),a.__value=o=t.opt.value,a.value=a.__value,a.disabled=t.disabled,a.className="svelte-b3e9e4",c.className="css-ui svelte-b3e9e4",d.className="inner-label svelte-b3e9e4",s.title=m=t.opt.tooltip||"",s.className="svelte-b3e9e4",L(s,"disabled",t.disabled),L(s,"has-help",t.opt.help)},m(e,r){i(e,s,r),n(s,a),a.checked=a.__value===t.value,n(s,l),n(s,c),n(s,u),n(s,d),d.innerHTML=f,n(s,p),w&&w.m(s,null)},p(e,t){e.value&&(a.checked=a.__value===t.value),e.options&&o!==(o=t.opt.value)&&(a.__value=o),a.value=a.__value,e.disabled&&(a.disabled=t.disabled),e.options&&f!==(f=t.opt.label)&&(d.innerHTML=f),t.opt.help?w?w.p(e,t):((w=Pe(0,t)).c(),w.m(s,null)):w&&(w.d(1),w=null),e.options&&m!==(m=t.opt.tooltip||"")&&(s.title=m),e.disabled&&L(s,"disabled",t.disabled),e.options&&L(s,"has-help",t.opt.help)},d(t){t&&r(s),e._bindingGroups[0].splice(e._bindingGroups[0].indexOf(a),1),v(a,"change",y),w&&w.d()}}}function Ke(e,t){var s;return{c(){(s=h("div")).className="disabled-message svelte-b3e9e4"},m(e,n){i(e,s,n),s.innerHTML=t.disabledMessage},p(e,t){e.disabledMessage&&(s.innerHTML=t.disabledMessage)},d(e){e&&r(s)}}}function Xe(e){x(this,e),this._state=t({value:null,disabled:!1,disabledMessage:"",indeterminate:!1,label:"",labelWidth:"auto",help:null,miniHelp:null,valign:"top",inline:!0,uid:""},e.data),this._bindingGroups=[[]],this._intro=!0,this._handlers.state=[Ve],this._slotted=e.slots||{},Ve.call(this,{changed:s({},this._state),current:this._state}),this._fragment=function(e,t){for(var s,a,o,l,c,m=e._slotted.default,g=t.options,v=[],_=0;_<g.length;_+=1)v[_]=Je(e,Ge(t,g,_));var y={type:"radio",labelWidth:t.labelWidth,valign:t.valign,label:t.label,disabled:t.disabled,help:t.help,miniHelp:t.miniHelp,uid:t.uid},w=new Fe({root:e.root,store:e.store,slots:{default:p()},data:y}),T=t.disabled&&t.disabledMessage&&Ke(e,t);return{c(){s=h("div");for(var e=0;e<v.length;e+=1)v[e].c();a=b("\n    "),w._fragment.c(),l=b("\n\n"),T&&T.c(),c=f(),s.className="svelte-b3e9e4",L(s,"inline",t.inline),L(s,"indeterminate",t.indeterminate)},m(e,t){n(w._slotted.default,s);for(var r=0;r<v.length;r+=1)v[r].m(s,null);n(w._slotted.default,a),m&&(n(w._slotted.default,o||(o=f())),n(w._slotted.default,m)),w._mount(e,t),i(e,l,t),T&&T.m(e,t),i(e,c,t)},p(t,n){if(t.options||t.disabled||t.value){g=n.options;for(var i=0;i<g.length;i+=1){const r=Ge(n,g,i);v[i]?v[i].p(t,r):(v[i]=Je(e,r),v[i].c(),v[i].m(s,null))}for(;i<v.length;i+=1)v[i].d(1);v.length=g.length}t.inline&&L(s,"inline",n.inline),t.indeterminate&&L(s,"indeterminate",n.indeterminate);var r={};t.labelWidth&&(r.labelWidth=n.labelWidth),t.valign&&(r.valign=n.valign),t.label&&(r.label=n.label),t.disabled&&(r.disabled=n.disabled),t.help&&(r.help=n.help),t.miniHelp&&(r.miniHelp=n.miniHelp),t.uid&&(r.uid=n.uid),w._set(r),n.disabled&&n.disabledMessage?T?T.p(t,n):((T=Ke(e,n)).c(),T.m(c.parentNode,c)):T&&(T.d(1),T=null)},d(e){d(v,e),m&&u(o,m),w.destroy(e),e&&r(l),T&&T.d(e),e&&r(c)}}}(this,this._state),this.root._oncreate.push(()=>{this.fire("update",{changed:s({},this._state),current:this._state})}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),U(this))}t(Fe.prototype,H),t(Xe.prototype,H);const Ze=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,Qe=/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi;function Ye(e,t){if(null===e)return null;if(void 0!==e){if((e=String(e)).indexOf("<")<0&&e.indexOf(">")<0)return e;if(e=function(e,t){t=(((void 0!==t?t||"":"<a><span><b><br><br/><i><strong><sup><sub><strike><u><em><tt>")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");var s=e,n=e;for(;;)if(n=(s=n).replace(Qe,"").replace(Ze,(function(e,s){return t.indexOf("<"+s.toLowerCase()+">")>-1?e:""})),s===n)return n}(e,t),"undefined"==typeof document)return e;var s=document.createElement("div");s.innerHTML=`<span>${e}</span>`;for(var n=s.childNodes[0].querySelectorAll("*"),i=0;i<n.length;i++){if("a"===n[i].nodeName.toLowerCase()){"_self"!==n[i].getAttribute("target")&&n[i].setAttribute("target","_blank"),n[i].setAttribute("rel","nofollow noopener noreferrer");const e=(n[i].getAttribute("href")||"").toLowerCase().replace(/[^a-z0-9 -/:?=]/g,"").trim();(e.startsWith("javascript:")||e.startsWith("vbscript:")||e.startsWith("data:"))&&n[i].setAttribute("href","")}const e=[];for(var r=0;r<n[i].attributes.length;r++){var a=n[i].attributes[r];a.specified&&"on"===a.name.substr(0,2)&&e.push(a.name)}e.forEach(e=>n[i].removeAttribute(e))}return s.childNodes[0].innerHTML}}function et({shareurlType:e,id:t,publicUrl:s,metadata:n,pluginShareurls:i}){if("default"===e)return s;let r="";return i.forEach(s=>{s.id===e&&(r=s.url.replace(/%chart_id%/g,t),r=r.replace(/%(.*?)%/g,(e,s)=>function(e,t=null,s=null){if(!t)return e;const n=Array.isArray(t)?t:t.split(".");let i=e;for(let e=0;e<n.length&&null!=i;e++)i=i[n[e]];return null==i?s:i}({id:t,metadata:n},s)))}),r}var tt={copy(e){const{embedCode:t,shareUrl:s}=this.get(),n="embedcode"===e?t:s,i=document.createElement("textarea");i.value=n,document.body.appendChild(i),i.select();try{if(document.execCommand("copy")){const{copySuccess:t}=this.get();t[e]=!0,this.set({copySuccess:t}),setTimeout(()=>{t[e]=!1,this.set({copySuccess:t})},2e3),Te("Chart Editor",e+"-copy")}}catch(e){console.error("Could not copy to clipboard.")}document.body.removeChild(i),this.refs[e].select()}};function st(e){x(this,e),this.refs={},this._state=t({embedTemplates:[],pluginShareurls:[],pending:!1,shareurlType:"default",embedType:"responsive",copySuccess:{}},e.data),this._recompute({shareurlType:1,id:1,publicUrl:1,metadata:1,pluginShareurls:1,embedType:1,embedTemplates:1},this._state),this._intro=!0,this._fragment=function(e,t){var s,a,o,l,c,u,d,p,m,f,y,w,T,N,U,x,R,S,H,k,M,A,C,z,I,D,B,$,j,O,W,q,F,V,G,P,J,K,X=we("publish / share-embed"),Z=we("publish / share-url"),Q=we("publish / copy-success"),Y={},ee=we("publish / embed"),te=we("publish / copy-success"),se={},ne=we("publish / embed / explanation"),ie=new E({root:e.root,store:e.store,data:{size:"30px",icon:"link",color:"#333333",class:"pt-5 pr-5"}});function re(e){this.select()}var ae=new E({root:e.root,store:e.store,data:{icon:"external-link",size:"15px",valign:"-3px"}}),oe=new E({root:e.root,store:e.store,data:{size:"18px",icon:"copy-to-clipboard",class:"pt-1"}});function le(t){e.copy("shareurl")}var ce={options:t.shareOptions,label:""};void 0!==t.shareurlType&&(ce.value=t.shareurlType,Y.value=!0);var ue=new Xe({root:e.root,store:e.store,data:ce,_bind(t,s){var n={};!Y.value&&t.value&&(n.shareurlType=s.value),e._set(n),Y={}}});e.root._beforecreate.push(()=>{ue._bind({value:1},ue.get())});var de=new E({root:e.root,store:e.store,data:{size:"30px",icon:"source-code",color:"#333333",class:"pt-5 pr-5",valign:"bottom"}});function pe(e){this.select()}var he=new E({root:e.root,store:e.store,data:{size:"18px",icon:"copy-to-clipboard",class:"pt-1"}});function me(t){e.copy("embedcode")}var be={options:t.embedOptions,label:""};void 0!==t.embedType&&(be.value=t.embedType,se.value=!0);var fe=new Xe({root:e.root,store:e.store,data:be,_bind(t,s){var n={};!se.value&&t.value&&(n.embedType=s.value),e._set(n),se={}}});return e.root._beforecreate.push(()=>{fe._bind({value:1},fe.get())}),{c(){s=h("div"),a=h("h2"),o=b("\n    "),l=h("div"),ie._fragment.c(),c=b("\n        "),u=h("div"),d=h("label"),p=b("\n            "),m=h("div"),f=h("div"),y=h("input"),w=b("\n                    "),T=h("a"),ae._fragment.c(),N=b("\n                        "),(U=h("span")).textContent="Open",x=b("\n                "),R=h("button"),oe._fragment.c(),S=b("\n                "),H=h("span"),k=b(Q),M=b("\n            "),ue._fragment.c(),A=b("\n\n    "),C=h("div"),de._fragment.c(),z=b("\n        "),I=h("div"),D=h("label"),B=b("\n            "),$=h("div"),j=h("div"),O=h("input"),W=b("\n                "),q=h("button"),he._fragment.c(),F=b("\n                "),V=h("span"),G=b(te),P=b("\n\n            "),fe._fragment.c(),J=b("\n\n            "),K=h("p"),d.htmlFor="share-url",d.className="svelte-1tny3g8",g(y,"focus",re),_(y,"type","text"),y.id="share-url",y.className="passive-input svelte-1tny3g8",y.value=t.shareUrl,y.readOnly=!0,T.target="_blank",T.className="btn btn-primary svelte-1tny3g8",T.href=t.shareUrl,f.className="copy-preview share-url svelte-1tny3g8",g(R,"click",le),R.className="btn copy-button svelte-1tny3g8",R.title=we("publish / copy"),H.className="copy-success svelte-1tny3g8",L(H,"show",t.copySuccess.shareurl),m.className="copy-group svelte-1tny3g8",u.className="share-embed-item svelte-1tny3g8",l.className="share-embed-block svelte-1tny3g8",D.htmlFor="embed-code",D.className="svelte-1tny3g8",g(O,"focus",pe),_(O,"type","text"),O.id="embed-code",O.className="passive-input svelte-1tny3g8",O.value=t.embedCode,O.readOnly=!0,j.className="copy-preview embed-code svelte-1tny3g8",g(q,"click",me),q.className="btn copy-button svelte-1tny3g8",q.title=we("publish / copy"),V.className="copy-success svelte-1tny3g8",L(V,"show",t.copySuccess.embedcode),$.className="copy-group svelte-1tny3g8",K.className="embed-explanation svelte-1tny3g8",I.className="share-embed-item svelte-1tny3g8",C.className="share-embed-block svelte-1tny3g8",s.className="share-embed svelte-1tny3g8",L(s,"pending",t.pending)},m(t,r){i(t,s,r),n(s,a),a.innerHTML=X,n(s,o),n(s,l),ie._mount(l,null),n(l,c),n(l,u),n(u,d),d.innerHTML=Z,n(u,p),n(u,m),n(m,f),n(f,y),e.refs.shareurl=y,n(f,w),n(f,T),ae._mount(T,null),n(T,N),n(T,U),n(m,x),n(m,R),oe._mount(R,null),n(m,S),n(m,H),n(H,k),n(u,M),ue._mount(u,null),n(s,A),n(s,C),de._mount(C,null),n(C,z),n(C,I),n(I,D),D.innerHTML=ee,n(I,B),n(I,$),n($,j),n(j,O),e.refs.embedcode=O,n($,W),n($,q),he._mount(q,null),n($,F),n($,V),n(V,G),n(I,P),fe._mount(I,null),n(I,J),n(I,K),K.innerHTML=ne},p(e,n){t=n,e.shareUrl&&(y.value=t.shareUrl,T.href=t.shareUrl),e.copySuccess&&L(H,"show",t.copySuccess.shareurl);var i={};e.shareOptions&&(i.options=t.shareOptions),!Y.value&&e.shareurlType&&(i.value=t.shareurlType,Y.value=void 0!==t.shareurlType),ue._set(i),Y={},e.embedCode&&(O.value=t.embedCode),e.copySuccess&&L(V,"show",t.copySuccess.embedcode);var r={};e.embedOptions&&(r.options=t.embedOptions),!se.value&&e.embedType&&(r.value=t.embedType,se.value=void 0!==t.embedType),fe._set(r),se={},e.pending&&L(s,"pending",t.pending)},d(t){t&&r(s),ie.destroy(),v(y,"focus",re),e.refs.shareurl===y&&(e.refs.shareurl=null),ae.destroy(),oe.destroy(),v(R,"click",le),ue.destroy(),de.destroy(),v(O,"focus",pe),e.refs.embedcode===O&&(e.refs.embedcode=null),he.destroy(),v(q,"click",me),fe.destroy()}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),U(this))}function nt(e,t){var s;return{c(){(s=h("p")).innerHTML='<i class="fa fa-spinner fa-pulse fa-fw"></i> loading...',s.className="mini-help"},m(e,t){i(e,s,t)},d(e){e&&r(s)}}}function it(e){var s,n,a;x(this,e),this._state=t({loading:!1},e.data),this._intro=!0,this._fragment=(s=this._state,a=s.loading&&nt(),{c(){a&&a.c(),n=f()},m(e,t){a&&a.m(e,t),i(e,n,t)},p(e,t){t.loading?a||((a=nt()).c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null)},d(e){a&&a.d(e),e&&r(n)}}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor))}t(st.prototype,H),t(st.prototype,tt),st.prototype._recompute=function(e,t){(e.shareurlType||e.id||e.publicUrl||e.metadata||e.pluginShareurls)&&this._differs(t.shareUrl,t.shareUrl=et(t))&&(e.shareUrl=!0),(e.embedType||e.publicUrl||e.metadata)&&this._differs(t.embedCode,t.embedCode=function({embedType:e,publicUrl:t,metadata:s}){return s?s.publish&&!s.publish["embed-codes"]?`<iframe src="${t}" width="100%" height="${s.publish["embed-height"]}" scrolling="no" frameborder="0" allowtransparency="true"></iframe>`:s.publish["embed-codes"]["embed-method-"+e]?s.publish["embed-codes"]["embed-method-"+e]:"":""}(t))&&(e.embedCode=!0),e.pluginShareurls&&this._differs(t.shareOptions,t.shareOptions=function({pluginShareurls:e}){return[{label:we("publish / share-url / fullscreen"),value:"default",help:we("publish / help / share-url / fullscreen")},...e.map(({name:e,id:t})=>({label:e,value:t,help:we("publish / help / share-url / "+t)}))]}(t))&&(e.shareOptions=!0),e.embedTemplates&&this._differs(t.embedOptions,t.embedOptions=function({embedTemplates:e}){return e.map(({title:e,id:t,text:s})=>({label:Ye(e),value:Ye(t),help:Ye(s)}))}(t))&&(e.embedOptions=!0)},t(it.prototype,H);let rt=!0;var at={publish(){this.set({publishing:!0,publishStarted:(new Date).getTime(),now:(new Date).getTime(),progress:[],unpublished:!1,publish_error:!1});const{dw_chart:e}=this.store.get();Te("Chart Editor","publish");const t=e.get().id;e.onNextSave(()=>{this.set({statusUrl:`/v3/charts/${t}/publish/status/${e.get("publicVersion")}`}),xe.post(`/v3/charts/${t}/publish`).then(()=>{this.set({published:!0,progress:["done"]}),xe.get("/v3/charts/"+t).then(e=>{Te("Chart Editor","publish-success"),this.publishFinished(e)})}).catch(e=>{this.set({publish_error:e.message,publishing:!1,progress:[]}),Te("Chart Editor","publish-error",e.message)}),setTimeout(()=>{const{publishing:e}=this.get();e&&this.updateStatus()},1e3)})},unpublish(){const e=this.store.get().id;this.set({progress:[],unpublishing:!0,needs_republish:!1}),xe.post(`/v3/charts/${e}/unpublish`).then(()=>{xe.get("/v3/charts/"+e).then(e=>{this.store.set(e),Te("Chart Editor","unpublish-success"),setTimeout(()=>{this.set({published:!1,unpublishing:!1,unpublished:!0})},1e3)})}).catch(e=>{this.set({publish_error:e.message,unpublishing:!1}),Te("Chart Editor","unpublish-error",e.message)})},requestUnpublishConfirmation(){this.set({publish_error:null}),this.refs.confirmationModal.open()},updateStatus(){const{statusUrl:e}=this.get();e&&xe.get(e).then(e=>{this.set({progress:e.progress||[],now:(new Date).getTime()});const{publishing:t}=this.get();t&&setTimeout(()=>{this.updateStatus()},500)})},publishFinished(e){this.set({progress:["done"],published:!0,publishStarted:0,needs_republish:!1,publishing:!1}),this.store.set({lastEditStep:5}),window.parent.postMessage({source:"datawrapper",type:"chart-publish",chartId:e.id},"*"),this.store.set(e)},select(e){window.location.hash=e.id;const{active_action:t}=this.get();if(e.id===t)return this.refs.action.set({show:!1}),this.set({active_action:"",Action:it});this.set({active_action:e.id}),e.mod?e.mod.App?(this.refs.action.set({show:!1}),e.mod.data&&this.refs.action.set(e.mod.data),this.set({Action:e.mod.App,actionData:e.mod.data,store:this.store}),this.refs.action.set({show:!0})):(this.set({Action:it}),this.refs.action.set({loading:!0}),e.mod.css&&function(e,t=null){"string"==typeof e&&(e={src:e}),e.parentElement&&"function"==typeof e.parentElement.appendChild||(e.parentElement=document.head),new Promise((s,n)=>{const i=document.createElement("link");i.rel="stylesheet",i.href=e.src,i.onload=()=>{t&&t(),s()},i.onerror=n,e.parentElement.appendChild(i)})}({src:e.mod.css,parentElement:this.refs.exportAndDuplicate}),function(e,t=null){new Promise((s,n)=>{const i=document.createElement("script");i.src=e,i.onload=()=>{t&&t(),s()},i.onerror=n,document.body.appendChild(i)})}(e.mod.src,()=>{setTimeout(()=>{require([e.mod.id],t=>{Object.assign(e.mod,t),this.set({Action:e.mod.App,actionData:e.mod.data,store:this.store}),this.refs.action.set({show:!0}),t.init&&t.init(this.refs.action),e.mod.data&&this.refs.action.set(e.mod.data)})},200)})):e.action&&this[e.action]?(this.set({Action:it}),this[e.action]()):"function"==typeof e.action&&(this.set({Action:it}),e.action())},duplicate(){const{dw_chart:e}=this.store.get();Te("Chart Editor","duplicate"),xe.post(`/v3/charts/${e.get("id")}/copy`).then(e=>{window.location.href=`/chart/${e.id}/edit`})}};function ot(){const{dw_chart:e,eventDispatch:t}=this.store.get();this.set({published:e.get("lastEditStep")>4}),t("create",this);const s=window.location.hash.slice(1);if(s){const{chartActions:e,$actions:t}=this.get(),n=e.concat(t).find(e=>e.id===s);n&&this.select(n)}}function lt({changed:e,current:t}){const{getUserData:s,setUserData:n}=this.store.get();if(e.embedType){const e=s();if(!t.embedType||!e)return;e.embed_type=t.embedType,n(e)}if(e.shareurlType){const e=s();if(!t.shareurlType||!e)return;e.shareurl_type=t.shareurlType,n(e)}if(e.published){const e=window.document.querySelector(".dw-create-publish .publish-step");e&&e.classList[t.published?"add":"remove"]("is-published")}e.auto_publish&&t.auto_publish&&rt&&(this.publish(),rt=!1,window.history.replaceState("","",window.location.pathname))}function ct(e){e.preventDefault();const{component:t,ctx:s}=this._svelte;t.select(s.action)}function ut(e,t,s){const n=Object.create(e);return n.action=t[s],n}function dt(e,t,s){const n=Object.create(e);return n.comp=t[s],n}function pt(e,t){var s={},n={pluginShareurls:t.pluginShareurls,embedTemplates:t.embedTemplates,pending:t.publishing||t.unpublishing,metadata:t.$metadata,id:t.$id,publicUrl:t.$publicUrl};void 0!==t.shareurlType&&(n.shareurlType=t.shareurlType,s.shareurlType=!0),void 0!==t.embedType&&(n.embedType=t.embedType,s.embedType=!0);var i=new st({root:e.root,store:e.store,data:n,_bind(t,n){var i={};!s.shareurlType&&t.shareurlType&&(i.shareurlType=n.shareurlType),!s.embedType&&t.embedType&&(i.embedType=n.embedType),e._set(i),s={}}});return e.root._beforecreate.push(()=>{i._bind({shareurlType:1,embedType:1},i.get())}),{c(){i._fragment.c()},m(e,t){i._mount(e,t)},p(e,n){t=n;var r={};e.pluginShareurls&&(r.pluginShareurls=t.pluginShareurls),e.embedTemplates&&(r.embedTemplates=t.embedTemplates),(e.publishing||e.unpublishing)&&(r.pending=t.publishing||t.unpublishing),e.$metadata&&(r.metadata=t.$metadata),e.$id&&(r.id=t.$id),e.$publicUrl&&(r.publicUrl=t.$publicUrl),!s.shareurlType&&e.shareurlType&&(r.shareurlType=t.shareurlType,s.shareurlType=void 0!==t.shareurlType),!s.embedType&&e.embedType&&(r.embedType=t.embedType,s.embedType=void 0!==t.embedType),i._set(r),s={}},d(e){i.destroy(e)}}}function ht(e,t){var s,n=t.comp.app;function a(t){var s={data:t.comp.data};return{root:e.root,store:e.store,data:s}}if(n)var o=new n(a(t));return{c(){o&&o._fragment.c(),s=f()},m(e,t){o&&o._mount(e,t),i(e,s,t)},p(e,t){var i={};e.afterEmbed&&(i.data=t.comp.data),n!==(n=t.comp.app)?(o&&o.destroy(),n?((o=new n(a(t)))._fragment.c(),o._mount(s.parentNode,s)):o=null):n&&o._set(i)},d(e){e&&r(s),o&&o.destroy(e)}}}function mt(e,t){var s;return{c(){s=h("p")},m(e,n){i(e,s,n),s.innerHTML=t.exportIntro},p(e,t){e.exportIntro&&(s.innerHTML=t.exportIntro)},d(e){e&&r(s)}}}function bt(e,t){var s,a,o,l,c,u,d,p,m=t.action.title,f=t.action.banner&&"FALSE"!=t.action.banner.text&&"-"!=t.action.banner.text&&ft(e,t);return{c(){s=h("li"),a=h("a"),o=h("i"),c=h("span"),d=b("\n            "),f&&f.c(),o.className=l="fa fa-"+t.action.icon,c.className="title",a._svelte={component:e,ctx:t},g(a,"click",ct),_(a,"role","button"),a.href=u=t.action.url?t.action.url:"#"+t.action.id,s.className=p="\n                action action-"+t.action.id+"\n                "+(t.action.class||"")+"\n                "+(t.action.id==t.active_action?"active":"")+"\n            "},m(e,t){i(e,s,t),n(s,a),n(a,o),n(a,c),c.innerHTML=m,n(s,d),f&&f.m(s,null)},p(n,i){t=i,n.sortedChartActions&&l!==(l="fa fa-"+t.action.icon)&&(o.className=l),n.sortedChartActions&&m!==(m=t.action.title)&&(c.innerHTML=m),a._svelte.ctx=t,n.sortedChartActions&&u!==(u=t.action.url?t.action.url:"#"+t.action.id)&&(a.href=u),t.action.banner&&"FALSE"!=t.action.banner.text&&"-"!=t.action.banner.text?f?f.p(n,t):((f=ft(e,t)).c(),f.m(s,null)):f&&(f.d(1),f=null),(n.sortedChartActions||n.active_action)&&p!==(p="\n                action action-"+t.action.id+"\n                "+(t.action.class||"")+"\n                "+(t.action.id==t.active_action?"active":"")+"\n            ")&&(s.className=p)},d(e){e&&r(s),v(a,"click",ct),f&&f.d()}}}function ft(e,t){var s,a,o,l=t.action.banner.text;return{c(){s=h("div"),a=b(l),s.className="banner",s.style.cssText=o=t.action.banner.style},m(e,t){i(e,s,t),n(s,a)},p(e,t){e.sortedChartActions&&l!==(l=t.action.banner.text)&&w(a,l),e.sortedChartActions&&o!==(o=t.action.banner.style)&&(s.style.cssText=o)},d(e){e&&r(s)}}}function gt(e,t){var s,n=t.action&&bt(e,t);return{c(){n&&n.c(),s=f()},m(e,t){n&&n.m(e,t),i(e,s,t)},p(t,i){i.action?n?n.p(t,i):((n=bt(e,i)).c(),n.m(s.parentNode,s)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&r(s)}}}function vt(e){x(this,e),this.refs={},this._state=t(t(this.store._init(["actions","publicVersion","metadata","id","publicUrl"]),{active_action:"",embedTemplates:[],pluginShareurls:[],published:!1,publishing:!1,publishStarted:0,unpublished:!1,unpublishing:!1,needsRepublish:!1,publish_error:!1,auto_publish:!1,progress:[],redirectDisabled:!1,shareurlType:"default",embedType:"responsive",Action:it,actionData:null,store:null,chartActions:[{id:"duplicate",icon:"code-fork",title:we("Duplicate"),order:500,action:"duplicate"}],publishHed:"",publishIntro:"",afterEmbed:[],afterEmbedData:{},exportHed:we("publish / export-duplicate"),exportIntro:we("publish / export-duplicate / intro"),embedCode:"",statusUrl:!1}),e.data),this.store._add(this,["actions","publicVersion","metadata","id","publicUrl"]),this._recompute({chartActions:1,$actions:1,publishStarted:1,now:1},this._state),this._intro=!0,this._handlers.state=[lt],this._handlers.destroy=[S],lt.call(this,{changed:s({},this._state),current:this._state}),this._fragment=function(e,t){var s,a,o,l,c,u,m,f,g,v,_,y,w,T,L=we("publish / title"),N=we("publish / unpublish-confirmation / explanation"),U={published:t.published,publishing:t.publishing,publishStarted:t.publishStarted,now:t.now,progress:t.progress,unpublished:t.unpublished,unpublishing:t.unpublishing,redirectDisabled:t.redirectDisabled,needsRepublish:t.needsRepublish,publishError:t.publish_error,publicVersion:t.$publicVersion},x=new ve({root:e.root,store:e.store,data:U});x.on("publish",(function(t){e.publish()})),x.on("unpublish",(function(t){e.requestUnpublishConfirmation()}));for(var R=t.published&&pt(e,t),S=t.afterEmbed,H=[],k=0;k<S.length;k+=1)H[k]=ht(e,dt(t,S,k));var M=t.exportIntro&&mt(e,t),A=t.sortedChartActions,C=[];for(k=0;k<A.length;k+=1)C[k]=gt(e,ut(t,A,k));var E=t.Action;function z(t){var s={visible:!0,show:!1,data:t.actionData,store:t.store};return{root:e.root,store:e.store,data:s}}if(E)var I=new E(z(t));var D={confirmButtonText:we("publish / unpublish-confirmation / unpublish"),confirmButtonIcon:"undo",backButtonText:we("publish / unpublish-confirmation / back"),id:"modalConfirmation",title:we("publish / unpublish-confirmation / title")},B=new Ce({root:e.root,store:e.store,slots:{default:p()},data:D});return B.on("confirm",(function(t){e.unpublish()})),e.refs.confirmationModal=B,{c(){s=h("h2"),a=b("\n\n"),x._fragment.c(),o=b("\n\n"),R&&R.c(),l=b("\n\n\n");for(var e=0;e<H.length;e+=1)H[e].c();c=b("\n\n\n"),u=h("div"),m=h("div"),f=h("h2"),g=b("\n        "),M&&M.c(),v=b("\n\n    "),_=h("ul");for(e=0;e<C.length;e+=1)C[e].c();y=b("\n\n    "),I&&I._fragment.c(),w=b("\n\n"),T=h("p"),B._fragment.c(),f.className="pt-1",_.className="chart-actions",u.className="export-and-duplicate"},m(r,d){i(r,s,d),s.innerHTML=L,i(r,a,d),x._mount(r,d),i(r,o,d),R&&R.m(r,d),i(r,l,d);for(var p=0;p<H.length;p+=1)H[p].m(r,d);i(r,c,d),i(r,u,d),n(u,m),n(m,f),f.innerHTML=t.exportHed,n(m,g),M&&M.m(m,null),n(u,v),n(u,_);for(p=0;p<C.length;p+=1)C[p].m(_,null);n(u,y),I&&(I._mount(u,null),e.refs.action=I),e.refs.exportAndDuplicate=u,i(r,w,d),n(B._slotted.default,T),T.innerHTML=N,B._mount(r,d)},p(t,s){var n={};if(t.published&&(n.published=s.published),t.publishing&&(n.publishing=s.publishing),t.publishStarted&&(n.publishStarted=s.publishStarted),t.now&&(n.now=s.now),t.progress&&(n.progress=s.progress),t.unpublished&&(n.unpublished=s.unpublished),t.unpublishing&&(n.unpublishing=s.unpublishing),t.redirectDisabled&&(n.redirectDisabled=s.redirectDisabled),t.needsRepublish&&(n.needsRepublish=s.needsRepublish),t.publish_error&&(n.publishError=s.publish_error),t.$publicVersion&&(n.publicVersion=s.$publicVersion),x._set(n),s.published?R?R.p(t,s):((R=pt(e,s)).c(),R.m(l.parentNode,l)):R&&(R.d(1),R=null),t.afterEmbed){S=s.afterEmbed;for(var i=0;i<S.length;i+=1){const n=dt(s,S,i);H[i]?H[i].p(t,n):(H[i]=ht(e,n),H[i].c(),H[i].m(c.parentNode,c))}for(;i<H.length;i+=1)H[i].d(1);H.length=S.length}if(t.exportHed&&(f.innerHTML=s.exportHed),s.exportIntro?M?M.p(t,s):((M=mt(e,s)).c(),M.m(m,null)):M&&(M.d(1),M=null),t.sortedChartActions||t.active_action){A=s.sortedChartActions;for(i=0;i<A.length;i+=1){const n=ut(s,A,i);C[i]?C[i].p(t,n):(C[i]=gt(e,n),C[i].c(),C[i].m(_,null))}for(;i<C.length;i+=1)C[i].d(1);C.length=A.length}var r={};t.actionData&&(r.data=s.actionData),t.store&&(r.store=s.store),E!==(E=s.Action)?(I&&I.destroy(),E?((I=new E(z(s)))._fragment.c(),I._mount(u,null),e.refs.action=I):(I=null,e.refs.action===I&&(e.refs.action=null))):E&&I._set(r)},d(t){t&&(r(s),r(a)),x.destroy(t),t&&r(o),R&&R.d(t),t&&r(l),d(H,t),t&&(r(c),r(u)),M&&M.d(),d(C,t),I&&I.destroy(),e.refs.exportAndDuplicate===u&&(e.refs.exportAndDuplicate=null),t&&r(w),B.destroy(t),e.refs.confirmationModal===B&&(e.refs.confirmationModal=null)}}}(this,this._state),this.root._oncreate.push(()=>{ot.call(this),this.fire("update",{changed:s({},this._state),current:this._state})}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),U(this))}function _t(e,t){var s;return{c(){(s=h("label")).className="control-label svelte-1nkiaxn"},m(e,n){i(e,s,n),s.innerHTML=t.label},p(e,t){e.label&&(s.innerHTML=t.label)},d(e){e&&r(s)}}}function yt(e,t){var s;return{c(){(s=h("div")).className="help success svelte-1nkiaxn"},m(e,n){i(e,s,n),s.innerHTML=t.success},p(e,t){e.success&&(s.innerHTML=t.success)},d(e){e&&r(s)}}}function wt(e,t){var s;return{c(){(s=h("div")).className="help error svelte-1nkiaxn"},m(e,n){i(e,s,n),s.innerHTML=t.error},p(e,t){e.error&&(s.innerHTML=t.error)},d(e){e&&r(s)}}}function Tt(e,t){var s;return{c(){(s=h("div")).className="help svelte-1nkiaxn"},m(e,n){i(e,s,n),s.innerHTML=t.help},p(e,t){e.help&&(s.innerHTML=t.help)},d(e){e&&r(s)}}}function Lt(e){var s,a,o,l,u,d,p,m,f,g,v,_,y;x(this,e),this._state=t({label:"",help:"",error:!1,success:!1,width:"auto",uid:""},e.data),this._intro=!0,this._slotted=e.slots||{},this._fragment=(s=this,a=this._state,f=s._slotted.default,g=a.label&&_t(0,a),v=a.success&&yt(0,a),_=a.error&&wt(0,a),y=!a.success&&!a.error&&a.help&&Tt(0,a),{c(){o=h("div"),g&&g.c(),l=b("\n    "),u=h("div"),d=b("\n    "),v&&v.c(),p=b(" "),_&&_.c(),m=b(" "),y&&y.c(),u.className="form-controls svelte-1nkiaxn",o.className="form-block svelte-1nkiaxn",T(o,"width",a.width),o.dataset.uid=a.uid,L(o,"success",a.success),L(o,"error",a.error)},m(e,t){i(e,o,t),g&&g.m(o,null),n(o,l),n(o,u),f&&n(u,f),n(o,d),v&&v.m(o,null),n(o,p),_&&_.m(o,null),n(o,m),y&&y.m(o,null)},p(e,t){t.label?g?g.p(e,t):((g=_t(0,t)).c(),g.m(o,l)):g&&(g.d(1),g=null),t.success?v?v.p(e,t):((v=yt(0,t)).c(),v.m(o,p)):v&&(v.d(1),v=null),t.error?_?_.p(e,t):((_=wt(0,t)).c(),_.m(o,m)):_&&(_.d(1),_=null),t.success||t.error||!t.help?y&&(y.d(1),y=null):y?y.p(e,t):((y=Tt(0,t)).c(),y.m(o,null)),e.width&&T(o,"width",t.width),e.uid&&(o.dataset.uid=t.uid),e.success&&L(o,"success",t.success),e.error&&L(o,"error",t.error)},d(e){e&&r(o),g&&g.d(),f&&c(u,f),v&&v.d(),_&&_.d(),y&&y.d()}}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor))}t(vt.prototype,H),t(vt.prototype,at),vt.prototype._recompute=function(e,t){(e.chartActions||e.$actions)&&this._differs(t.sortedChartActions,t.sortedChartActions=function({chartActions:e,$actions:t}){return e.concat(t).filter(e=>"publish-s3"!==e.id).sort((e,t)=>e.order-t.order)}(t))&&(e.sortedChartActions=!0),(e.publishStarted||e.now)&&this._differs(t.publishWait,t.publishWait=function({publishStarted:e,now:t}){return e>0?t-e:0}(t))&&(e.publishWait=!0)},t(Lt.prototype,H);var Nt={async createAccount(e){this.set({signedUp:!0}),Te("Chart Editor","send-embed-code");try{await Re("/v3/auth/signup",{payload:{email:e,invitation:!0,chartId:this.store.get().id}}),window.location.reload()}catch(e){if("HttpReqError"===e.name){const t=await e.response.json();this.set({error:t.message||e})}else this.set({error:"Unknown error: "+e})}}};function Ut(t,s){var n,a,o,l=we("publish / guest / h1"),c=we("publish / guest / p");return{c(){n=h("h2"),a=b("\n\n            "),o=h("p")},m(e,t){i(e,n,t),n.innerHTML=l,i(e,a,t),i(e,o,t),o.innerHTML=c},p:e,d(e){e&&(r(n),r(a),r(o))}}}function xt(e,t){var s,n;return{c(){s=h("noscript"),n=h("noscript")},m(e,r){i(e,s,r),s.insertAdjacentHTML("afterend",t.guestAboveInvite),i(e,n,r)},p(e,t){e.guestAboveInvite&&(a(s,n),s.insertAdjacentHTML("afterend",t.guestAboveInvite))},d(e){e&&(a(s,n),r(s),r(n))}}}function Rt(e,t){var s,a;return{c(){s=h("div"),a=b(t.error),s.className="mt-2 alert alert-warning"},m(e,t){i(e,s,t),n(s,a)},p(e,t){e.error&&w(a,t.error)},d(e){e&&r(s)}}}function St(e){x(this,e),this._state=t({error:"",email:"",guestAboveInvite:"",guestBelowInvite:"",signedUp:!1},e.data),this._intro=!0,this._fragment=function(e,t){var s,o,l,c,u,d,m,f,y,w,L,N,U,x,R,S,H,k,M,A,C,E,z=!1,I=we("publish / guest / cta"),D=we("publish / guest / back");function B(e){return e.guestAboveInvite?xt:Ut}var $=B(t),j=$(e,t);function O(){z=!0,e.set({email:d.value}),z=!1}function W(s){e.createAccount(t.email)}var q={label:we("publish / guest / e-mail"),help:we("publish / guest / example-email")},F=new Lt({root:e.root,store:e.store,slots:{default:p()},data:q}),V=t.error&&Rt(e,t);return{c(){s=h("div"),o=h("div"),l=h("div"),j.c(),c=b("\n\n        "),u=h("div"),d=h("input"),m=b("\n\n                "),f=h("button"),y=h("i"),L=b("\n                      "),N=h("noscript"),F._fragment.c(),U=b("\n\n        "),x=h("noscript"),R=h("noscript"),S=b("\n\n        "),H=h("div"),k=h("button"),M=h("i"),A=b("   "),C=h("noscript"),E=b("\n\n            "),V&&V.c(),T(l,"margin-bottom","20px"),g(d,"input",O),_(d,"type","email"),d.className="input-xlarge",y.className=w="fa "+(t.signedUp?"fa-circle-o-notch fa-spin":"fa-envelope"),g(f,"click",W),f.className="btn btn-save btn-primary",T(f,"white-space","nowrap"),T(f,"margin-left","10px"),T(u,"display","flex"),M.className="fa fa-chevron-left",k.className="btn btn-save btn-default btn-back",T(H,"margin-top","30px"),o.className="span5",s.className="row publish-signup"},m(e,r){i(e,s,r),n(s,o),n(o,l),j.m(l,null),n(o,c),n(F._slotted.default,u),n(u,d),d.value=t.email,n(u,m),n(u,f),n(f,y),n(f,L),n(f,N),N.insertAdjacentHTML("afterend",I),F._mount(o,null),n(o,U),n(o,x),x.insertAdjacentHTML("afterend",t.guestBelowInvite),n(o,R),n(o,S),n(o,H),n(H,k),n(k,M),n(k,A),n(k,C),C.insertAdjacentHTML("afterend",D),n(H,E),V&&V.m(H,null)},p(s,n){$===($=B(t=n))&&j?j.p(s,t):(j.d(1),(j=$(e,t)).c(),j.m(l,null)),!z&&s.email&&(d.value=t.email),s.signedUp&&w!==(w="fa "+(t.signedUp?"fa-circle-o-notch fa-spin":"fa-envelope"))&&(y.className=w),s.guestBelowInvite&&(a(x,R),x.insertAdjacentHTML("afterend",t.guestBelowInvite)),t.error?V?V.p(s,t):((V=Rt(e,t)).c(),V.m(H,null)):V&&(V.d(1),V=null)},d(e){e&&r(s),j.d(),v(d,"input",O),v(f,"click",W),F.destroy(),V&&V.d()}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),U(this))}t(St.prototype,H),t(St.prototype,Nt);var Ht={async resendActivation(){this.set({status:"sending"});try{await Re("/v3/auth/resend-activation"),this.set({status:"success"})}catch(e){this.set({status:"error"})}}};function kt(e,t){var s,a,o,l,c,u=we("publish / pending-activation / resend");function d(t){e.resendActivation()}return{c(){s=h("button"),a=h("i"),l=b("\n             \n            "),c=h("noscript"),a.className=o="fa "+("sending"==t.status?"fa-spin fa-circle-o-notch":"fa-envelope"),g(s,"click",d),s.className="btn btn-primary"},m(e,t){i(e,s,t),n(s,a),n(s,l),n(s,c),c.insertAdjacentHTML("afterend",u)},p(e,t){e.status&&o!==(o="fa "+("sending"==t.status?"fa-spin fa-circle-o-notch":"fa-envelope"))&&(a.className=o)},d(e){e&&r(s),v(s,"click",d)}}}function Mt(t,s){var n,a=we("publish / pending-activation / resend-error");return{c(){n=h("p")},m(e,t){i(e,n,t),n.innerHTML=a},p:e,d(e){e&&r(n)}}}function At(t,s){var n,a=we("publish / pending-activation / resend-success");return{c(){n=h("p")},m(e,t){i(e,n,t),n.innerHTML=a},p:e,d(e){e&&r(n)}}}function Ct(e){x(this,e),this._state=t({status:""},e.data),this._intro=!0,this._fragment=function(e,t){var s,a,o,l,c,u,d=we("publish / pending-activation / h1"),p=we("publish / pending-activation / p");function m(e){return"success"==e.status?At:"error"==e.status?Mt:kt}var f=m(t),g=f(e,t);return{c(){s=h("div"),a=h("h2"),o=b("\n\n    "),l=h("p"),c=b("\n\n    "),u=h("div"),g.c(),T(u,"margin-top","20px")},m(e,t){i(e,s,t),n(s,a),a.innerHTML=d,n(s,o),n(s,l),l.innerHTML=p,n(s,c),n(s,u),g.m(u,null)},p(t,s){f===(f=m(s))&&g?g.p(t,s):(g.d(1),(g=f(e,s)).c(),g.m(u,null))},d(e){e&&r(s),g.d()}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor))}function Et(e,t){var s={afterEmbed:t.afterEmbed,redirectDisabled:t.redirectDisabled,embedTemplates:t.embedTemplates,embedType:t.embedType,pluginShareurls:t.pluginShareurls,shareurlType:t.shareurlType,",":!0,needsRepublish:t.needsRepublish},n=new vt({root:e.root,store:e.store,data:s});return{c(){n._fragment.c()},m(e,t){n._mount(e,t)},p(e,t){var s={};e.afterEmbed&&(s.afterEmbed=t.afterEmbed),e.redirectDisabled&&(s.redirectDisabled=t.redirectDisabled),e.embedTemplates&&(s.embedTemplates=t.embedTemplates),e.embedType&&(s.embedType=t.embedType),e.pluginShareurls&&(s.pluginShareurls=t.pluginShareurls),e.shareurlType&&(s.shareurlType=t.shareurlType),e.needsRepublish&&(s.needsRepublish=t.needsRepublish),n._set(s)},d(e){n.destroy(e)}}}function zt(t,s){var n=new Ct({root:t.root,store:t.store});return{c(){n._fragment.c()},m(e,t){n._mount(e,t)},p:e,d(e){n.destroy(e)}}}function It(e,t){var s={fromSvelte:"true",guestAboveInvite:t.guestAboveInvite,guestBelowInvite:t.guestBelowInvite},n=new St({root:e.root,store:e.store,data:s});return{c(){n._fragment.c()},m(e,t){n._mount(e,t)},p(e,t){var s={};e.guestAboveInvite&&(s.guestAboveInvite=t.guestAboveInvite),e.guestBelowInvite&&(s.guestBelowInvite=t.guestBelowInvite),n._set(s)},d(e){n.destroy(e)}}}function Dt(e){x(this,e),this._state=t(t(this.store._init(["user"]),{embedTemplates:[],embedType:"responsive",pluginShareurls:[],shareurlType:"default",afterEmbed:[],guestAboveInvite:"",guestBelowInvite:"",redirectDisabled:!1,needsRepublish:!1}),e.data),this.store._add(this,["user"]),this._intro=!0,this._handlers.destroy=[S],this._fragment=function(e,t){var s,a;function o(e){return e.$user.isGuest?It:e.$user.isActivated?Et:zt}var l=o(t),c=l(e,t);return{c(){s=h("div"),a=h("div"),c.c(),a.className="publish-step is-published",s.className="dw-create-publish"},m(e,t){i(e,s,t),n(s,a),c.m(a,null)},p(t,s){l===(l=o(s))&&c?c.p(t,s):(c.d(1),(c=l(e,s)).c(),c.m(a,null))},d(e){e&&r(s),c.d()}}}(this,this._state),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),U(this))}return t(Ct.prototype,H),t(Ct.prototype,Ht),t(Dt.prototype,H),{PublishSidebar:Dt}}));
